2025-06-20 14:08:50.091 +05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 14:08:50.563 +05:00 [DBG] The index {'BookingId'} was not created on entity type 'BookingRoom' as the properties are already covered by the index {'BookingId', 'RoomId'}.
2025-06-20 14:08:50.564 +05:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-06-20 14:08:50.776 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 14:08:50.891 +05:00 [DBG] Creating DbConnection.
2025-06-20 14:08:50.894 +05:00 [DBG] Created DbConnection. (1ms).
2025-06-20 14:08:50.898 +05:00 [DBG] Migrating using database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:50.900 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:50.905 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:50.910 +05:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-20 14:08:50.914 +05:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (3ms).
2025-06-20 14:08:50.914 +05:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (7ms).
2025-06-20 14:08:50.919 +05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-20 14:08:50.926 +05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-20 14:08:50.930 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:50.934 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 14:08:50.934 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:50.934 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:50.934 +05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-06-20 14:08:50.936 +05:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 14:08:50.937 +05:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 14:08:50.937 +05:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 14:08:50.937 +05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-20 14:08:50.953 +05:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-06-20 14:08:51.028 +05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-20 14:08:51.033 +05:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-20 14:08:51.034 +05:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-20 14:08:51.034 +05:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-20 14:08:51.035 +05:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-20 14:08:51.035 +05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-20 14:08:51.038 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-06-20 14:08:51.040 +05:00 [DBG] Committing transaction.
2025-06-20 14:08:51.043 +05:00 [DBG] Committed transaction.
2025-06-20 14:08:51.044 +05:00 [DBG] Disposing transaction.
2025-06-20 14:08:51.046 +05:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-06-20 14:08:51.046 +05:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-06-20 14:08:51.047 +05:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-06-20 14:08:51.047 +05:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-20 14:08:51.047 +05:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-06-20 14:08:51.047 +05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-20 14:08:51.048 +05:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-20 14:08:51.048 +05:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 14:08:51.048 +05:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 14:08:51.048 +05:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 14:08:51.048 +05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-20 14:08:51.049 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-20 14:08:51.050 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 14:08:51.050 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 14:08:51.050 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 14:08:51.050 +05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-20 14:08:51.053 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-20 14:08:51.055 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:51.056 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-06-20 14:08:51.060 +05:00 [INF] No migrations were applied. The database is already up to date.
2025-06-20 14:08:51.061 +05:00 [DBG] Committing transaction.
2025-06-20 14:08:51.063 +05:00 [DBG] Committed transaction.
2025-06-20 14:08:51.064 +05:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-06-20 14:08:51.064 +05:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 14:08:51.064 +05:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-06-20 14:08:51.064 +05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-20 14:08:51.140 +05:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-06-20 14:08:51.140 +05:00 [DBG] Disposing transaction.
2025-06-20 14:08:51.140 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:51.140 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 14:08:51.142 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 14:08:51.143 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:08:51.144 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 14:21:35.587 +05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 14:21:35.665 +05:00 [DBG] Hosting starting
2025-06-20 14:21:35.683 +05:00 [DBG] Middleware loaded
2025-06-20 14:21:35.685 +05:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16529 B).
2025-06-20 14:21:35.686 +05:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-06-20 14:21:35.815 +05:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-20 14:21:35.890 +05:00 [INF] Now listening on: https://localhost:7276
2025-06-20 14:21:35.890 +05:00 [INF] Now listening on: http://localhost:5117
2025-06-20 14:21:35.890 +05:00 [DBG] Loaded hosting startup assembly HotelBookingSystem.Web
2025-06-20 14:21:35.890 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-06-20 14:21:35.890 +05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-20 14:21:35.890 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-06-20 14:21:35.967 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 14:21:35.968 +05:00 [INF] Hosting environment: Development
2025-06-20 14:21:35.968 +05:00 [INF] Content root path: C:\Users\WINDOWS 11\source\repos\HotelBookingSystem\HotelBookingSystem\src\HotelBookingSystem.Web
2025-06-20 14:21:35.968 +05:00 [DBG] Hosting started
2025-06-20 14:21:36.211 +05:00 [DBG] Connection id "0HNDFRFDEP1K0" received FIN.
2025-06-20 14:21:36.211 +05:00 [DBG] Connection id "0HNDFRFDEP1K1" received FIN.
2025-06-20 14:21:36.212 +05:00 [DBG] Connection id "0HNDFRFDEP1K1" accepted.
2025-06-20 14:21:36.212 +05:00 [DBG] Connection id "0HNDFRFDEP1K0" accepted.
2025-06-20 14:21:36.215 +05:00 [DBG] Connection id "0HNDFRFDEP1K0" started.
2025-06-20 14:21:36.217 +05:00 [DBG] Connection id "0HNDFRFDEP1K1" started.
2025-06-20 14:21:36.232 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 14:21:36.232 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 14:21:36.241 +05:00 [DBG] Connection id "0HNDFRFDEP1K1" stopped.
2025-06-20 14:21:36.241 +05:00 [DBG] Connection id "0HNDFRFDEP1K0" stopped.
2025-06-20 14:21:36.246 +05:00 [DBG] Connection id "0HNDFRFDEP1K0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 14:21:36.246 +05:00 [DBG] Connection id "0HNDFRFDEP1K1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 14:21:38.373 +05:00 [DBG] Connection id "0HNDFRFDEP1K2" accepted.
2025-06-20 14:21:38.374 +05:00 [DBG] Connection id "0HNDFRFDEP1K2" started.
2025-06-20 14:21:38.491 +05:00 [DBG] Connection 0HNDFRFDEP1K2 established using the following protocol: "Tls13"
2025-06-20 14:21:38.609 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger - null null
2025-06-20 14:21:38.908 +05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 14:21:38.949 +05:00 [DBG] No candidates found for the request path '/swagger'
2025-06-20 14:21:38.950 +05:00 [DBG] Request did not match any endpoints
2025-06-20 14:21:38.973 +05:00 [INF] Request to /swagger took 0.006 seconds with status code 301
2025-06-20 14:21:38.982 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger - 301 0 null 378.3631ms
2025-06-20 14:21:39.003 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/index.html - null null
2025-06-20 14:21:39.008 +05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-20 14:21:39.009 +05:00 [DBG] Request did not match any endpoints
2025-06-20 14:21:39.099 +05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-06-20 14:21:39.102 +05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-06-20 14:21:39.157 +05:00 [INF] Request to /swagger/index.html took 0.146 seconds with status code 200
2025-06-20 14:21:39.162 +05:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-06-20 14:21:39.163 +05:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-06-20 14:21:39.164 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/index.html - 200 null text/html;charset=utf-8 161.5958ms
2025-06-20 14:21:39.227 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/swagger-ui.css - null null
2025-06-20 14:21:39.228 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/swagger-ui-bundle.js - null null
2025-06-20 14:21:39.228 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 14:21:39.228 +05:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-06-20 14:21:39.228 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/swagger-ui-standalone-preset.js - null null
2025-06-20 14:21:39.228 +05:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2025-06-20 14:21:39.230 +05:00 [DBG] Request did not match any endpoints
2025-06-20 14:21:39.230 +05:00 [DBG] Request did not match any endpoints
2025-06-20 14:21:39.230 +05:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-06-20 14:21:39.230 +05:00 [DBG] Request did not match any endpoints
2025-06-20 14:21:39.242 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 14:21:39.265 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 36.4723ms
2025-06-20 14:21:39.331 +05:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-06-20 14:21:39.331 +05:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-06-20 14:21:39.334 +05:00 [INF] Request to /swagger/swagger-ui.css took 0.099 seconds with status code 200
2025-06-20 14:21:39.335 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/swagger-ui.css - 200 152034 text/css 108.5664ms
2025-06-20 14:21:39.340 +05:00 [INF] Request to /swagger/swagger-ui-standalone-preset.js took 0.102 seconds with status code 200
2025-06-20 14:21:39.341 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 112.9607ms
2025-06-20 14:21:39.350 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_vs/browserLink - null null
2025-06-20 14:21:39.452 +05:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-06-20 14:21:39.452 +05:00 [INF] Request to /swagger/swagger-ui-bundle.js took 0.219 seconds with status code 200
2025-06-20 14:21:39.453 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 225.1603ms
2025-06-20 14:21:39.705 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_vs/browserLink - 200 null text/javascript; charset=UTF-8 355.4543ms
2025-06-20 14:21:39.931 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 14:21:39.931 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 14:21:39.932 +05:00 [DBG] Request did not match any endpoints
2025-06-20 14:21:39.978 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.044 seconds with status code 200
2025-06-20 14:21:39.978 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.5259ms
2025-06-20 14:21:40.022 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/favicon-32x32.png - null null
2025-06-20 14:21:40.023 +05:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-06-20 14:21:40.024 +05:00 [DBG] Request did not match any endpoints
2025-06-20 14:21:40.027 +05:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-06-20 14:21:40.030 +05:00 [INF] Request to /swagger/favicon-32x32.png took 0.002 seconds with status code 200
2025-06-20 14:21:40.031 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/favicon-32x32.png - 200 628 image/png 8.5367ms
2025-06-20 14:21:42.330 +05:00 [DBG] Connection id "0HNDFRFDEP1K2" received FIN.
2025-06-20 14:21:42.333 +05:00 [DBG] The connection queue processing loop for 0HNDFRFDEP1K2 completed.
2025-06-20 14:21:42.338 +05:00 [DBG] Connection id "0HNDFRFDEP1K2" is closed. The last processed stream ID was 17.
2025-06-20 14:21:42.338 +05:00 [DBG] Connection id "0HNDFRFDEP1K2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 14:21:42.345 +05:00 [DBG] Connection id "0HNDFRFDEP1K2" stopped.
2025-06-20 14:24:40.800 +05:00 [DBG] Connection id "0HNDFRFDEP1K3" accepted.
2025-06-20 14:24:40.807 +05:00 [DBG] Connection id "0HNDFRFDEP1K3" started.
2025-06-20 14:24:40.828 +05:00 [DBG] Connection 0HNDFRFDEP1K3 established using the following protocol: "Tls13"
2025-06-20 14:24:40.833 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 14:24:40.839 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 14:24:40.848 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 14:24:40.849 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:24:40.850 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 14:24:40.854 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:24:40.885 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 14:24:40.888 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 14:24:40.888 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 14:24:40.888 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 14:24:40.888 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 14:24:40.889 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 14:24:40.890 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 14:24:41.018 +05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 14:24:41.202 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 14:24:41.206 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 14:24:41.208 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 14:24:41.209 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 14:24:41.215 +05:00 [DBG] Connection id "0HNDFRFDEP1K3", Request id "0HNDFRFDEP1K3:00000001": started reading request body.
2025-06-20 14:24:41.215 +05:00 [DBG] Connection id "0HNDFRFDEP1K3", Request id "0HNDFRFDEP1K3:00000001": done reading request body.
2025-06-20 14:24:41.225 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 14:24:41.226 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:24:41.226 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:24:41.226 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 14:24:41.231 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:24:41.996 +05:00 [DBG] The index {'BookingId'} was not created on entity type 'BookingRoom' as the properties are already covered by the index {'BookingId', 'RoomId'}.
2025-06-20 14:24:41.997 +05:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-06-20 14:24:42.316 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 14:24:42.363 +05:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2025-06-20 14:24:42.660 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Hotel>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Hotel entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Hotel instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Hotel);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Hotel.HotelId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Hotel)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]: 
                            {
                                return 
                                {
                                    Hotel instance;
                                    instance = new Hotel();
                                    instance.<HotelId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<HotelName>k__BackingField = dataReader.GetString(2);
                                    instance.<Location>k__BackingField = dataReader.GetString(3);
                                    instance.<PhoneNumber>k__BackingField = dataReader.GetString(4);
                                    instance.<StarRating>k__BackingField = dataReader.GetInt32(5);
                                    instance.<TotalRooms>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Hotel)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 14:24:42.707 +05:00 [DBG] Creating DbConnection.
2025-06-20 14:24:42.712 +05:00 [DBG] Created DbConnection. (3ms).
2025-06-20 14:24:42.715 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:24:42.735 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:24:42.739 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 14:24:42.741 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-20 14:24:42.746 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-06-20 14:24:42.753 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 14:24:42.794 +05:00 [INF] Executed DbCommand (40ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 14:24:42.803 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:24:42.810 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 10ms reading results.
2025-06-20 14:24:42.813 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:24:42.814 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (1ms).
2025-06-20 14:24:42.931 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 2040.2051ms
2025-06-20 14:24:42.933 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:24:43.018 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 14:24:43.021 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:24:43.023 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 14:24:43.023 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 500 null application/json 2190.4066ms
2025-06-20 14:25:02.584 +05:00 [DBG] Connection id "0HNDFRFDEP1K3" received FIN.
2025-06-20 14:25:02.584 +05:00 [DBG] Connection id "0HNDFRFDEP1K3" is closed. The last processed stream ID was 1.
2025-06-20 14:25:02.584 +05:00 [DBG] Connection id "0HNDFRFDEP1K3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 14:25:02.585 +05:00 [DBG] The connection queue processing loop for 0HNDFRFDEP1K3 completed.
2025-06-20 14:25:02.585 +05:00 [DBG] Connection id "0HNDFRFDEP1K3" stopped.
2025-06-20 14:55:53.322 +05:00 [DBG] Connection id "0HNDFRFDEP1K4" accepted.
2025-06-20 14:55:53.326 +05:00 [DBG] Connection id "0HNDFRFDEP1K4" started.
2025-06-20 14:55:53.373 +05:00 [DBG] Connection 0HNDFRFDEP1K4 established using the following protocol: "Tls13"
2025-06-20 14:55:53.387 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 14:55:53.398 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 14:55:53.400 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 14:55:53.402 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:55:53.405 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 14:55:53.409 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:55:53.420 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 14:55:53.421 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 14:55:53.421 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 14:55:53.423 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 14:55:53.423 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 14:55:53.423 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 14:55:53.424 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 14:55:53.436 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 14:55:53.438 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 14:55:53.439 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 14:55:53.440 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 14:55:53.441 +05:00 [DBG] Connection id "0HNDFRFDEP1K4", Request id "0HNDFRFDEP1K4:00000001": started reading request body.
2025-06-20 14:55:53.441 +05:00 [DBG] Connection id "0HNDFRFDEP1K4", Request id "0HNDFRFDEP1K4:00000001": done reading request body.
2025-06-20 14:55:53.445 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 14:55:53.445 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:55:53.445 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:55:53.445 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 14:55:53.447 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:55:53.479 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 14:55:53.492 +05:00 [DBG] Creating DbConnection.
2025-06-20 14:55:53.495 +05:00 [DBG] Created DbConnection. (1ms).
2025-06-20 14:55:53.495 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:55:53.512 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:55:53.512 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 14:55:53.541 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (29ms).
2025-06-20 14:55:53.543 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (30ms).
2025-06-20 14:55:53.545 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 14:55:53.553 +05:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 14:55:53.614 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 14:55:53.631 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:55:53.631 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 77ms reading results.
2025-06-20 14:55:53.632 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:55:53.632 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 14:55:53.690 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 266.6121ms
2025-06-20 14:55:53.691 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:55:53.780 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 14:55:53.781 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:55:53.781 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 14:55:53.781 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 500 null application/json 395.011ms
2025-06-20 14:55:55.595 +05:00 [DBG] Connection id "0HNDFRFDEP1K4" received FIN.
2025-06-20 14:55:55.596 +05:00 [DBG] Connection id "0HNDFRFDEP1K4" is closed. The last processed stream ID was 1.
2025-06-20 14:55:55.596 +05:00 [DBG] Connection id "0HNDFRFDEP1K4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 14:55:55.596 +05:00 [DBG] The connection queue processing loop for 0HNDFRFDEP1K4 completed.
2025-06-20 14:55:55.597 +05:00 [DBG] Connection id "0HNDFRFDEP1K4" stopped.
2025-06-20 14:56:29.211 +05:00 [DBG] Connection id "0HNDFRFDEP1K5" accepted.
2025-06-20 14:56:29.213 +05:00 [DBG] Connection id "0HNDFRFDEP1K5" started.
2025-06-20 14:56:29.226 +05:00 [DBG] Connection 0HNDFRFDEP1K5 established using the following protocol: "Tls13"
2025-06-20 14:56:29.229 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 14:56:29.229 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 14:56:29.229 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 14:56:29.229 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:56:29.230 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 14:56:29.230 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:56:29.231 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 14:56:29.231 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 14:56:29.231 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 14:56:29.231 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 14:56:29.231 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 14:56:29.233 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 14:56:29.233 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 14:56:29.241 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 14:56:29.242 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 14:56:29.242 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 14:56:29.242 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 14:56:29.243 +05:00 [DBG] Connection id "0HNDFRFDEP1K5", Request id "0HNDFRFDEP1K5:00000001": started reading request body.
2025-06-20 14:56:29.243 +05:00 [DBG] Connection id "0HNDFRFDEP1K5", Request id "0HNDFRFDEP1K5:00000001": done reading request body.
2025-06-20 14:56:29.243 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 14:56:29.243 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:56:29.243 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:56:29.243 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 14:56:29.243 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:56:29.304 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 14:56:29.305 +05:00 [DBG] Creating DbConnection.
2025-06-20 14:56:29.305 +05:00 [DBG] Created DbConnection. (0ms).
2025-06-20 14:56:29.305 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:56:29.306 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:56:29.306 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 14:56:29.306 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 14:56:29.306 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 14:56:29.306 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 14:56:29.311 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 14:56:29.311 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 14:56:29.311 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:56:29.312 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 14:56:29.312 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:56:29.312 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 14:56:29.356 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 122.4178ms
2025-06-20 14:56:29.356 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:56:29.420 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 14:56:29.420 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:56:29.420 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 14:56:29.420 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 500 null application/json 191.4953ms
2025-06-20 14:57:55.782 +05:00 [DBG] Connection id "0HNDFRFDEP1K5" received FIN.
2025-06-20 14:57:55.782 +05:00 [DBG] Connection id "0HNDFRFDEP1K5" is closed. The last processed stream ID was 1.
2025-06-20 14:57:55.782 +05:00 [DBG] Connection id "0HNDFRFDEP1K5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 14:57:55.786 +05:00 [DBG] The connection queue processing loop for 0HNDFRFDEP1K5 completed.
2025-06-20 14:57:55.789 +05:00 [DBG] Connection id "0HNDFRFDEP1K5" stopped.
2025-06-20 14:58:41.947 +05:00 [DBG] Connection id "0HNDFRFDEP1K6" accepted.
2025-06-20 14:58:41.951 +05:00 [DBG] Connection id "0HNDFRFDEP1K6" started.
2025-06-20 14:58:41.967 +05:00 [DBG] Connection 0HNDFRFDEP1K6 established using the following protocol: "Tls13"
2025-06-20 14:58:41.970 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 14:58:41.970 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 14:58:41.970 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 14:58:41.970 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:58:41.970 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 14:58:41.971 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:58:41.971 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 14:58:41.971 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 14:58:41.971 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 14:58:41.971 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 14:58:41.971 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 14:58:41.972 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 14:58:41.972 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 14:58:41.972 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 14:58:41.972 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 14:58:41.972 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 14:58:41.973 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 14:58:41.973 +05:00 [DBG] Connection id "0HNDFRFDEP1K6", Request id "0HNDFRFDEP1K6:00000001": started reading request body.
2025-06-20 14:58:41.974 +05:00 [DBG] Connection id "0HNDFRFDEP1K6", Request id "0HNDFRFDEP1K6:00000001": done reading request body.
2025-06-20 14:58:41.974 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 14:58:41.974 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:58:41.974 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:58:41.974 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 14:58:41.975 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 14:58:41.976 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 14:58:41.976 +05:00 [DBG] Creating DbConnection.
2025-06-20 14:58:41.977 +05:00 [DBG] Created DbConnection. (0ms).
2025-06-20 14:58:41.977 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:58:41.978 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:58:41.978 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 14:58:41.978 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 14:58:41.978 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 14:58:41.979 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 14:58:41.981 +05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 14:58:41.982 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 14:58:41.982 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:58:41.982 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 14:58:41.982 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:58:41.982 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 14:58:42.034 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 62.0779ms
2025-06-20 14:58:42.034 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 14:58:42.104 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 14:58:42.104 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 14:58:42.105 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 14:58:42.105 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 500 null application/json 135.3174ms
2025-06-20 14:58:45.859 +05:00 [DBG] Connection id "0HNDFRFDEP1K6" received FIN.
2025-06-20 14:58:45.860 +05:00 [DBG] Connection id "0HNDFRFDEP1K6" is closed. The last processed stream ID was 1.
2025-06-20 14:58:45.860 +05:00 [DBG] The connection queue processing loop for 0HNDFRFDEP1K6 completed.
2025-06-20 14:58:45.860 +05:00 [DBG] Connection id "0HNDFRFDEP1K6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 14:58:45.872 +05:00 [DBG] Connection id "0HNDFRFDEP1K6" stopped.
2025-06-20 15:02:46.733 +05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 15:02:46.783 +05:00 [DBG] Hosting starting
2025-06-20 15:02:46.790 +05:00 [DBG] Middleware loaded
2025-06-20 15:02:46.792 +05:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16529 B).
2025-06-20 15:02:46.792 +05:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-06-20 15:02:46.887 +05:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-20 15:02:46.944 +05:00 [INF] Now listening on: https://localhost:7276
2025-06-20 15:02:46.945 +05:00 [INF] Now listening on: http://localhost:5117
2025-06-20 15:02:46.949 +05:00 [DBG] Loaded hosting startup assembly HotelBookingSystem.Web
2025-06-20 15:02:46.950 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-06-20 15:02:46.951 +05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-20 15:02:46.951 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-06-20 15:02:47.033 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 15:02:47.033 +05:00 [INF] Hosting environment: Development
2025-06-20 15:02:47.033 +05:00 [INF] Content root path: C:\Users\WINDOWS 11\source\repos\HotelBookingSystem\HotelBookingSystem\src\HotelBookingSystem.Web
2025-06-20 15:02:47.033 +05:00 [DBG] Hosting started
2025-06-20 15:02:47.135 +05:00 [DBG] Connection id "0HNDFS6DRAPTO" received FIN.
2025-06-20 15:02:47.135 +05:00 [DBG] Connection id "0HNDFS6DRAPTN" received FIN.
2025-06-20 15:02:47.135 +05:00 [DBG] Connection id "0HNDFS6DRAPTO" accepted.
2025-06-20 15:02:47.135 +05:00 [DBG] Connection id "0HNDFS6DRAPTN" accepted.
2025-06-20 15:02:47.137 +05:00 [DBG] Connection id "0HNDFS6DRAPTN" started.
2025-06-20 15:02:47.137 +05:00 [DBG] Connection id "0HNDFS6DRAPTO" started.
2025-06-20 15:02:47.161 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:02:47.161 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:02:47.182 +05:00 [DBG] Connection id "0HNDFS6DRAPTO" stopped.
2025-06-20 15:02:47.182 +05:00 [DBG] Connection id "0HNDFS6DRAPTN" stopped.
2025-06-20 15:02:47.193 +05:00 [DBG] Connection id "0HNDFS6DRAPTO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:02:47.193 +05:00 [DBG] Connection id "0HNDFS6DRAPTN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:02:47.647 +05:00 [DBG] Connection id "0HNDFS6DRAPTP" accepted.
2025-06-20 15:02:47.648 +05:00 [DBG] Connection id "0HNDFS6DRAPTP" started.
2025-06-20 15:02:47.692 +05:00 [DBG] Connection 0HNDFS6DRAPTP established using the following protocol: "Tls13"
2025-06-20 15:02:47.746 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/index.html - null null
2025-06-20 15:02:47.858 +05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 15:02:47.878 +05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-20 15:02:47.879 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:02:47.938 +05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-06-20 15:02:47.939 +05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-06-20 15:02:47.962 +05:00 [INF] Request to /swagger/index.html took 0.073 seconds with status code 200
2025-06-20 15:02:47.964 +05:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-06-20 15:02:47.965 +05:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-06-20 15:02:47.971 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/index.html - 200 null text/html;charset=utf-8 224.3731ms
2025-06-20 15:02:48.018 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:02:48.025 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_vs/browserLink - null null
2025-06-20 15:02:48.027 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:02:48.028 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 9.7429ms
2025-06-20 15:02:48.075 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.7248ms
2025-06-20 15:02:48.315 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:02:48.316 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:02:48.316 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:02:48.335 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.017 seconds with status code 200
2025-06-20 15:02:48.335 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.152ms
2025-06-20 15:02:51.254 +05:00 [DBG] Connection id "0HNDFS6DRAPTP" received FIN.
2025-06-20 15:02:51.256 +05:00 [DBG] The connection queue processing loop for 0HNDFS6DRAPTP completed.
2025-06-20 15:02:51.258 +05:00 [DBG] Connection id "0HNDFS6DRAPTP" is closed. The last processed stream ID was 7.
2025-06-20 15:02:51.258 +05:00 [DBG] Connection id "0HNDFS6DRAPTP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:02:51.269 +05:00 [DBG] Connection id "0HNDFS6DRAPTP" stopped.
2025-06-20 15:03:08.618 +05:00 [DBG] Connection id "0HNDFS6DRAPTQ" accepted.
2025-06-20 15:03:08.619 +05:00 [DBG] Connection id "0HNDFS6DRAPTQ" started.
2025-06-20 15:03:08.629 +05:00 [DBG] Connection 0HNDFS6DRAPTQ established using the following protocol: "Tls13"
2025-06-20 15:03:08.634 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 15:03:08.647 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 15:03:08.651 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 15:03:08.652 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:03:08.655 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:03:08.657 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:03:08.694 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:03:08.695 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:03:08.696 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:03:08.696 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:03:08.696 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:03:08.696 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:03:08.698 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:03:08.811 +05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 15:03:08.973 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:03:08.976 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:03:08.977 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 15:03:08.978 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 15:03:08.985 +05:00 [DBG] Connection id "0HNDFS6DRAPTQ", Request id "0HNDFS6DRAPTQ:00000001": started reading request body.
2025-06-20 15:03:08.985 +05:00 [DBG] Connection id "0HNDFS6DRAPTQ", Request id "0HNDFS6DRAPTQ:00000001": done reading request body.
2025-06-20 15:03:08.995 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 15:03:08.995 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:03:08.995 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:03:08.995 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:03:08.999 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:03:09.471 +05:00 [DBG] The index {'BookingId'} was not created on entity type 'BookingRoom' as the properties are already covered by the index {'BookingId', 'RoomId'}.
2025-06-20 15:03:09.471 +05:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-06-20 15:03:09.749 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:03:09.790 +05:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2025-06-20 15:03:10.117 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Hotel>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Hotel entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Hotel instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Hotel);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Hotel.HotelId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Hotel)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]: 
                            {
                                return 
                                {
                                    Hotel instance;
                                    instance = new Hotel();
                                    instance.<HotelId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<HotelName>k__BackingField = dataReader.GetString(2);
                                    instance.<Location>k__BackingField = dataReader.GetString(3);
                                    instance.<PhoneNumber>k__BackingField = dataReader.GetString(4);
                                    instance.<StarRating>k__BackingField = dataReader.GetInt32(5);
                                    instance.<TotalRooms>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Hotel)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 15:03:10.155 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:03:10.159 +05:00 [DBG] Created DbConnection. (3ms).
2025-06-20 15:03:10.161 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.178 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.181 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:03:10.183 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-20 15:03:10.188 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-06-20 15:03:10.198 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:03:10.229 +05:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:03:10.275 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:03:10.306 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.313 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 78ms reading results.
2025-06-20 15:03:10.316 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.317 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (1ms).
2025-06-20 15:03:10.348 +05:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Review.ReviewId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:03:10.370 +05:00 [DBG] The navigation 'Review.Hotel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:03:10.379 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:03:10.381 +05:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-06-20 15:03:10.383 +05:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-06-20 15:03:10.407 +05:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-06-20 15:03:10.457 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.457 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.461 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:03:10.461 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:03:10.462 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 15:03:10.462 +05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:03:10.497 +05:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:03:10.504 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.505 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-06-20 15:03:10.507 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.507 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:03:10.517 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'HotelBookingSystem.Infrastructure.Persistence.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e4a2e8ae-4629-414d-bb57-ce100a3fc0f1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e4a2e8ae-4629-414d-bb57-ce100a3fc0f1
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-20 15:03:10.617 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 1917.9197ms
2025-06-20 15:03:10.618 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:03:10.785 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:03:10.789 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:03:10.790 +05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-06-20 15:03:10.791 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 500 null application/json 2157.5247ms
2025-06-20 15:03:11.288 +05:00 [DBG] Connection id "0HNDFS6DRAPTQ" received FIN.
2025-06-20 15:03:11.289 +05:00 [DBG] Connection id "0HNDFS6DRAPTQ" is closed. The last processed stream ID was 1.
2025-06-20 15:03:11.289 +05:00 [DBG] Connection id "0HNDFS6DRAPTQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:03:11.289 +05:00 [DBG] The connection queue processing loop for 0HNDFS6DRAPTQ completed.
2025-06-20 15:03:11.303 +05:00 [DBG] Connection id "0HNDFS6DRAPTQ" stopped.
2025-06-20 15:06:34.883 +05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 15:06:34.932 +05:00 [DBG] Hosting starting
2025-06-20 15:06:34.940 +05:00 [DBG] Middleware loaded
2025-06-20 15:06:34.941 +05:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16529 B).
2025-06-20 15:06:34.942 +05:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-06-20 15:06:35.025 +05:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-20 15:06:35.082 +05:00 [INF] Now listening on: https://localhost:7276
2025-06-20 15:06:35.083 +05:00 [INF] Now listening on: http://localhost:5117
2025-06-20 15:06:35.083 +05:00 [DBG] Loaded hosting startup assembly HotelBookingSystem.Web
2025-06-20 15:06:35.083 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-06-20 15:06:35.083 +05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-20 15:06:35.083 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-06-20 15:06:35.096 +05:00 [DBG] Connection id "0HNDFS8HPB5R6" accepted.
2025-06-20 15:06:35.096 +05:00 [DBG] Connection id "0HNDFS8HPB5R7" accepted.
2025-06-20 15:06:35.099 +05:00 [DBG] Connection id "0HNDFS8HPB5R7" started.
2025-06-20 15:06:35.099 +05:00 [DBG] Connection id "0HNDFS8HPB5R6" started.
2025-06-20 15:06:35.117 +05:00 [DBG] Connection id "0HNDFS8HPB5R6" received FIN.
2025-06-20 15:06:35.117 +05:00 [DBG] Connection id "0HNDFS8HPB5R7" received FIN.
2025-06-20 15:06:35.138 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:06:35.138 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:06:35.150 +05:00 [DBG] Connection id "0HNDFS8HPB5R7" stopped.
2025-06-20 15:06:35.150 +05:00 [DBG] Connection id "0HNDFS8HPB5R6" stopped.
2025-06-20 15:06:35.157 +05:00 [DBG] Connection id "0HNDFS8HPB5R7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:06:35.157 +05:00 [DBG] Connection id "0HNDFS8HPB5R6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:06:35.200 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 15:06:35.201 +05:00 [INF] Hosting environment: Development
2025-06-20 15:06:35.201 +05:00 [INF] Content root path: C:\Users\WINDOWS 11\source\repos\HotelBookingSystem\HotelBookingSystem\src\HotelBookingSystem.Web
2025-06-20 15:06:35.202 +05:00 [DBG] Hosting started
2025-06-20 15:06:35.410 +05:00 [DBG] Connection id "0HNDFS8HPB5R8" accepted.
2025-06-20 15:06:35.410 +05:00 [DBG] Connection id "0HNDFS8HPB5R8" started.
2025-06-20 15:06:35.449 +05:00 [DBG] Connection 0HNDFS8HPB5R8 established using the following protocol: "Tls13"
2025-06-20 15:06:35.502 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/index.html - null null
2025-06-20 15:06:35.637 +05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 15:06:35.655 +05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-20 15:06:35.658 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:06:35.732 +05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-06-20 15:06:35.734 +05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-06-20 15:06:35.765 +05:00 [INF] Request to /swagger/index.html took 0.091 seconds with status code 200
2025-06-20 15:06:35.766 +05:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-06-20 15:06:35.767 +05:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-06-20 15:06:35.772 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/index.html - 200 null text/html;charset=utf-8 271.2606ms
2025-06-20 15:06:35.802 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:06:35.802 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_vs/browserLink - null null
2025-06-20 15:06:35.809 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:06:35.811 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 8.6683ms
2025-06-20 15:06:35.848 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.1253ms
2025-06-20 15:06:35.899 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:06:35.900 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:06:35.900 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:06:35.914 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.013 seconds with status code 200
2025-06-20 15:06:35.916 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.9579ms
2025-06-20 15:06:41.616 +05:00 [DBG] Connection id "0HNDFS8HPB5R8" received FIN.
2025-06-20 15:06:41.619 +05:00 [DBG] The connection queue processing loop for 0HNDFS8HPB5R8 completed.
2025-06-20 15:06:41.624 +05:00 [DBG] Connection id "0HNDFS8HPB5R8" is closed. The last processed stream ID was 7.
2025-06-20 15:06:41.624 +05:00 [DBG] Connection id "0HNDFS8HPB5R8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:06:41.637 +05:00 [DBG] Connection id "0HNDFS8HPB5R8" stopped.
2025-06-20 15:06:54.696 +05:00 [DBG] Connection id "0HNDFS8HPB5R9" accepted.
2025-06-20 15:06:54.696 +05:00 [DBG] Connection id "0HNDFS8HPB5R9" started.
2025-06-20 15:06:54.702 +05:00 [DBG] Connection 0HNDFS8HPB5R9 established using the following protocol: "Tls13"
2025-06-20 15:06:54.706 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 15:06:54.717 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 15:06:54.721 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 15:06:54.721 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:06:54.724 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:06:54.725 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:06:54.744 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:06:54.746 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:06:54.747 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:06:54.747 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:06:54.748 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:06:54.748 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:06:54.750 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:06:54.833 +05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 15:06:54.955 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:06:54.957 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:06:54.959 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 15:06:54.959 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 15:06:54.966 +05:00 [DBG] Connection id "0HNDFS8HPB5R9", Request id "0HNDFS8HPB5R9:00000001": started reading request body.
2025-06-20 15:06:54.967 +05:00 [DBG] Connection id "0HNDFS8HPB5R9", Request id "0HNDFS8HPB5R9:00000001": done reading request body.
2025-06-20 15:06:54.974 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 15:06:54.975 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:06:54.975 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:06:54.976 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:06:54.980 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:06:55.358 +05:00 [DBG] The index {'BookingId'} was not created on entity type 'BookingRoom' as the properties are already covered by the index {'BookingId', 'RoomId'}.
2025-06-20 15:06:55.359 +05:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-06-20 15:06:55.618 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:06:55.648 +05:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2025-06-20 15:06:55.838 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Hotel>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Hotel entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Hotel instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Hotel);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Hotel.HotelId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Hotel)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]: 
                            {
                                return 
                                {
                                    Hotel instance;
                                    instance = new Hotel();
                                    instance.<HotelId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<HotelName>k__BackingField = dataReader.GetString(2);
                                    instance.<Location>k__BackingField = dataReader.GetString(3);
                                    instance.<PhoneNumber>k__BackingField = dataReader.GetString(4);
                                    instance.<StarRating>k__BackingField = dataReader.GetInt32(5);
                                    instance.<TotalRooms>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Hotel)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 15:06:55.864 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:06:55.867 +05:00 [DBG] Created DbConnection. (2ms).
2025-06-20 15:06:55.869 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:55.883 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:55.886 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:06:55.887 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-06-20 15:06:55.891 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-06-20 15:06:55.897 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:06:55.921 +05:00 [INF] Executed DbCommand (26ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:06:55.961 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:06:55.987 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:55.992 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 67ms reading results.
2025-06-20 15:06:55.993 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:55.994 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:06:56.021 +05:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Review.ReviewId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:06:56.049 +05:00 [DBG] The navigation 'Review.Hotel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:06:56.057 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:06:56.062 +05:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-06-20 15:06:56.065 +05:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-06-20 15:06:56.083 +05:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-06-20 15:06:56.159 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:56.159 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:56.161 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:06:56.161 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:06:56.162 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 15:06:56.162 +05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:06:56.171 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:06:56.178 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:56.179 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 7ms reading results.
2025-06-20 15:06:56.181 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:56.182 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:06:56.191 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'HotelBookingSystem.Infrastructure.Persistence.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4fc600c1-7bbf-4b83-89f1-924f9a90d530
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4fc600c1-7bbf-4b83-89f1-924f9a90d530
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-20 15:06:56.333 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 1582.2705ms
2025-06-20 15:06:56.334 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:06:56.457 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:06:56.460 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:06:56.463 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:06:56.463 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 500 null application/json 1756.8992ms
2025-06-20 15:07:01.660 +05:00 [DBG] Connection id "0HNDFS8HPB5R9" received FIN.
2025-06-20 15:07:01.661 +05:00 [DBG] Connection id "0HNDFS8HPB5R9" is closed. The last processed stream ID was 1.
2025-06-20 15:07:01.661 +05:00 [DBG] Connection id "0HNDFS8HPB5R9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:07:01.661 +05:00 [DBG] The connection queue processing loop for 0HNDFS8HPB5R9 completed.
2025-06-20 15:07:01.662 +05:00 [DBG] Connection id "0HNDFS8HPB5R9" stopped.
2025-06-20 15:08:37.810 +05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 15:08:37.864 +05:00 [DBG] Hosting starting
2025-06-20 15:08:37.874 +05:00 [DBG] Middleware loaded
2025-06-20 15:08:37.875 +05:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16529 B).
2025-06-20 15:08:37.876 +05:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-06-20 15:08:37.951 +05:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-20 15:08:37.999 +05:00 [INF] Now listening on: https://localhost:7276
2025-06-20 15:08:37.999 +05:00 [INF] Now listening on: http://localhost:5117
2025-06-20 15:08:38.000 +05:00 [DBG] Loaded hosting startup assembly HotelBookingSystem.Web
2025-06-20 15:08:38.000 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-06-20 15:08:38.000 +05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-20 15:08:38.000 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-06-20 15:08:38.081 +05:00 [DBG] Connection id "0HNDFS9ME75AA" received FIN.
2025-06-20 15:08:38.081 +05:00 [DBG] Connection id "0HNDFS9ME75A9" received FIN.
2025-06-20 15:08:38.082 +05:00 [DBG] Connection id "0HNDFS9ME75AA" accepted.
2025-06-20 15:08:38.082 +05:00 [DBG] Connection id "0HNDFS9ME75A9" accepted.
2025-06-20 15:08:38.090 +05:00 [DBG] Connection id "0HNDFS9ME75AA" started.
2025-06-20 15:08:38.090 +05:00 [DBG] Connection id "0HNDFS9ME75A9" started.
2025-06-20 15:08:38.111 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:08:38.111 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:08:38.128 +05:00 [DBG] Connection id "0HNDFS9ME75AA" stopped.
2025-06-20 15:08:38.128 +05:00 [DBG] Connection id "0HNDFS9ME75A9" stopped.
2025-06-20 15:08:38.140 +05:00 [DBG] Connection id "0HNDFS9ME75AA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:08:38.140 +05:00 [DBG] Connection id "0HNDFS9ME75A9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:08:38.290 +05:00 [DBG] Connection id "0HNDFS9ME75AB" accepted.
2025-06-20 15:08:38.291 +05:00 [DBG] Connection id "0HNDFS9ME75AB" started.
2025-06-20 15:08:38.373 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 15:08:38.373 +05:00 [INF] Hosting environment: Development
2025-06-20 15:08:38.373 +05:00 [INF] Content root path: C:\Users\WINDOWS 11\source\repos\HotelBookingSystem\HotelBookingSystem\src\HotelBookingSystem.Web
2025-06-20 15:08:38.374 +05:00 [DBG] Hosting started
2025-06-20 15:08:38.385 +05:00 [DBG] Connection 0HNDFS9ME75AB established using the following protocol: "Tls13"
2025-06-20 15:08:38.466 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/index.html - null null
2025-06-20 15:08:38.597 +05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 15:08:38.620 +05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-20 15:08:38.621 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:08:38.686 +05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-06-20 15:08:38.689 +05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-06-20 15:08:38.714 +05:00 [INF] Request to /swagger/index.html took 0.083 seconds with status code 200
2025-06-20 15:08:38.716 +05:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-06-20 15:08:38.717 +05:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-06-20 15:08:38.720 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/index.html - 200 null text/html;charset=utf-8 260.4008ms
2025-06-20 15:08:38.758 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_vs/browserLink - null null
2025-06-20 15:08:38.758 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:08:38.768 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:08:38.773 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 13.3564ms
2025-06-20 15:08:38.822 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.4434ms
2025-06-20 15:08:38.876 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:08:38.876 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:08:38.877 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:08:38.902 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.024 seconds with status code 200
2025-06-20 15:08:38.908 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.0987ms
2025-06-20 15:08:41.820 +05:00 [DBG] Connection id "0HNDFS9ME75AB" received FIN.
2025-06-20 15:08:41.822 +05:00 [DBG] The connection queue processing loop for 0HNDFS9ME75AB completed.
2025-06-20 15:08:41.824 +05:00 [DBG] Connection id "0HNDFS9ME75AB" is closed. The last processed stream ID was 7.
2025-06-20 15:08:41.824 +05:00 [DBG] Connection id "0HNDFS9ME75AB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:08:41.834 +05:00 [DBG] Connection id "0HNDFS9ME75AB" stopped.
2025-06-20 15:09:43.807 +05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 15:09:43.869 +05:00 [DBG] Hosting starting
2025-06-20 15:09:43.878 +05:00 [DBG] Middleware loaded
2025-06-20 15:09:43.879 +05:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16529 B).
2025-06-20 15:09:43.880 +05:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-06-20 15:09:43.963 +05:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-20 15:09:44.022 +05:00 [INF] Now listening on: https://localhost:7276
2025-06-20 15:09:44.028 +05:00 [INF] Now listening on: http://localhost:5117
2025-06-20 15:09:44.030 +05:00 [DBG] Loaded hosting startup assembly HotelBookingSystem.Web
2025-06-20 15:09:44.030 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-06-20 15:09:44.030 +05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-20 15:09:44.030 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-06-20 15:09:44.040 +05:00 [DBG] Connection id "0HNDFSAA38HB1" received FIN.
2025-06-20 15:09:44.041 +05:00 [DBG] Connection id "0HNDFSAA38HB2" received FIN.
2025-06-20 15:09:44.048 +05:00 [DBG] Connection id "0HNDFSAA38HB2" accepted.
2025-06-20 15:09:44.050 +05:00 [DBG] Connection id "0HNDFSAA38HB1" accepted.
2025-06-20 15:09:44.052 +05:00 [DBG] Connection id "0HNDFSAA38HB1" started.
2025-06-20 15:09:44.052 +05:00 [DBG] Connection id "0HNDFSAA38HB2" started.
2025-06-20 15:09:44.073 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:09:44.073 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:09:44.084 +05:00 [DBG] Connection id "0HNDFSAA38HB2" stopped.
2025-06-20 15:09:44.084 +05:00 [DBG] Connection id "0HNDFSAA38HB1" stopped.
2025-06-20 15:09:44.090 +05:00 [DBG] Connection id "0HNDFSAA38HB2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:09:44.090 +05:00 [DBG] Connection id "0HNDFSAA38HB1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:09:44.133 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 15:09:44.133 +05:00 [INF] Hosting environment: Development
2025-06-20 15:09:44.133 +05:00 [INF] Content root path: C:\Users\WINDOWS 11\source\repos\HotelBookingSystem\HotelBookingSystem\src\HotelBookingSystem.Web
2025-06-20 15:09:44.133 +05:00 [DBG] Hosting started
2025-06-20 15:09:45.922 +05:00 [DBG] Connection id "0HNDFSAA38HB3" accepted.
2025-06-20 15:09:45.922 +05:00 [DBG] Connection id "0HNDFSAA38HB3" started.
2025-06-20 15:09:45.969 +05:00 [DBG] Connection 0HNDFSAA38HB3 established using the following protocol: "Tls13"
2025-06-20 15:09:46.022 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/index.html - null null
2025-06-20 15:09:46.022 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:09:46.044 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:09:46.049 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 27.8296ms
2025-06-20 15:09:46.174 +05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 15:09:46.192 +05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-20 15:09:46.193 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:09:46.240 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:09:46.241 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:09:46.241 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:09:46.271 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.025 seconds with status code 200
2025-06-20 15:09:46.275 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.1375ms
2025-06-20 15:09:46.318 +05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-06-20 15:09:46.321 +05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-06-20 15:09:46.343 +05:00 [INF] Request to /swagger/index.html took 0.139 seconds with status code 200
2025-06-20 15:09:46.346 +05:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-06-20 15:09:46.349 +05:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-06-20 15:09:46.350 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/index.html - 200 null text/html;charset=utf-8 331.1908ms
2025-06-20 15:09:46.386 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:09:46.387 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_vs/browserLink - null null
2025-06-20 15:09:46.389 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:09:46.390 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 3.8406ms
2025-06-20 15:09:46.502 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_vs/browserLink - 200 null text/javascript; charset=UTF-8 115.3083ms
2025-06-20 15:09:46.586 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:09:46.586 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:09:46.586 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:09:46.608 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.018 seconds with status code 200
2025-06-20 15:09:46.610 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 22.7263ms
2025-06-20 15:09:49.391 +05:00 [DBG] Connection id "0HNDFSAA38HB3" received FIN.
2025-06-20 15:09:49.401 +05:00 [DBG] The connection queue processing loop for 0HNDFSAA38HB3 completed.
2025-06-20 15:09:49.407 +05:00 [DBG] Connection id "0HNDFSAA38HB3" is closed. The last processed stream ID was 11.
2025-06-20 15:09:49.408 +05:00 [DBG] Connection id "0HNDFSAA38HB3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:09:49.419 +05:00 [DBG] Connection id "0HNDFSAA38HB3" stopped.
2025-06-20 15:10:45.197 +05:00 [DBG] Connection id "0HNDFSAA38HB4" accepted.
2025-06-20 15:10:45.207 +05:00 [DBG] Connection id "0HNDFSAA38HB4" started.
2025-06-20 15:10:45.224 +05:00 [DBG] Connection 0HNDFSAA38HB4 established using the following protocol: "Tls13"
2025-06-20 15:10:45.231 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 15:10:45.237 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 15:10:45.248 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 15:10:45.249 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:10:45.251 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:10:45.253 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:10:45.279 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:10:45.281 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:10:45.281 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:10:45.282 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:10:45.282 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:10:45.283 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:10:45.284 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:10:45.357 +05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 15:10:45.462 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:10:45.465 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:10:45.467 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 15:10:45.468 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 15:10:45.477 +05:00 [DBG] Connection id "0HNDFSAA38HB4", Request id "0HNDFSAA38HB4:00000001": started reading request body.
2025-06-20 15:10:45.477 +05:00 [DBG] Connection id "0HNDFSAA38HB4", Request id "0HNDFSAA38HB4:00000001": done reading request body.
2025-06-20 15:10:45.487 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 15:10:45.487 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:10:45.487 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:10:45.488 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:10:45.491 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:10:50.639 +05:00 [DBG] The index {'BookingId'} was not created on entity type 'BookingRoom' as the properties are already covered by the index {'BookingId', 'RoomId'}.
2025-06-20 15:10:50.640 +05:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-06-20 15:10:50.771 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:10:50.794 +05:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2025-06-20 15:10:50.953 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Hotel>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Hotel entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Hotel instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Hotel);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Hotel.HotelId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Hotel)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]: 
                            {
                                return 
                                {
                                    Hotel instance;
                                    instance = new Hotel();
                                    instance.<HotelId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<HotelName>k__BackingField = dataReader.GetString(2);
                                    instance.<Location>k__BackingField = dataReader.GetString(3);
                                    instance.<PhoneNumber>k__BackingField = dataReader.GetString(4);
                                    instance.<StarRating>k__BackingField = dataReader.GetInt32(5);
                                    instance.<TotalRooms>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Hotel)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 15:10:50.977 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:10:50.981 +05:00 [DBG] Created DbConnection. (1ms).
2025-06-20 15:10:50.983 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:51.044 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:51.048 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:10:51.050 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-20 15:10:51.053 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-06-20 15:10:51.058 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:10:51.079 +05:00 [INF] Executed DbCommand (22ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:10:51.106 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:10:51.126 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:51.145 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 51ms reading results.
2025-06-20 15:10:51.153 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:51.156 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (5ms).
2025-06-20 15:10:59.024 +05:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Review.ReviewId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:10:59.038 +05:00 [DBG] The navigation 'Review.Hotel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:10:59.047 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:10:59.049 +05:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-06-20 15:10:59.051 +05:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-06-20 15:10:59.061 +05:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-06-20 15:10:59.103 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:59.103 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:59.106 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:10:59.106 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:10:59.107 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 15:10:59.107 +05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:10:59.115 +05:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:10:59.132 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:59.132 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2025-06-20 15:10:59.134 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:59.134 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:10:59.140 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'HotelBookingSystem.Infrastructure.Persistence.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3da4e049-16c8-4311-b947-bbfd2190a9db
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:3da4e049-16c8-4311-b947-bbfd2190a9db
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-20 15:10:59.256 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 13970.5768ms
2025-06-20 15:10:59.257 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:10:59.356 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:10:59.360 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:10:59.361 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:10:59.362 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 500 null application/json 14130.4013ms
2025-06-20 15:10:59.557 +05:00 [DBG] Connection id "0HNDFSAA38HB4" received FIN.
2025-06-20 15:10:59.558 +05:00 [DBG] Connection id "0HNDFSAA38HB4" is closed. The last processed stream ID was 1.
2025-06-20 15:10:59.558 +05:00 [DBG] Connection id "0HNDFSAA38HB4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:10:59.559 +05:00 [DBG] The connection queue processing loop for 0HNDFSAA38HB4 completed.
2025-06-20 15:10:59.559 +05:00 [DBG] Connection id "0HNDFSAA38HB4" stopped.
2025-06-20 15:11:30.892 +05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 15:11:30.936 +05:00 [DBG] Hosting starting
2025-06-20 15:11:30.944 +05:00 [DBG] Middleware loaded
2025-06-20 15:11:30.945 +05:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16529 B).
2025-06-20 15:11:30.946 +05:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-06-20 15:11:31.049 +05:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-20 15:11:31.101 +05:00 [INF] Now listening on: https://localhost:7276
2025-06-20 15:11:31.102 +05:00 [INF] Now listening on: http://localhost:5117
2025-06-20 15:11:31.102 +05:00 [DBG] Loaded hosting startup assembly HotelBookingSystem.Web
2025-06-20 15:11:31.102 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-06-20 15:11:31.102 +05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-20 15:11:31.102 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-06-20 15:11:31.165 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 15:11:31.165 +05:00 [INF] Hosting environment: Development
2025-06-20 15:11:31.165 +05:00 [INF] Content root path: C:\Users\WINDOWS 11\source\repos\HotelBookingSystem\HotelBookingSystem\src\HotelBookingSystem.Web
2025-06-20 15:11:31.165 +05:00 [DBG] Hosting started
2025-06-20 15:11:31.604 +05:00 [DBG] Connection id "0HNDFSBA52ESU" received FIN.
2025-06-20 15:11:31.604 +05:00 [DBG] Connection id "0HNDFSBA52ESV" received FIN.
2025-06-20 15:11:31.610 +05:00 [DBG] Connection id "0HNDFSBA52ESU" accepted.
2025-06-20 15:11:31.610 +05:00 [DBG] Connection id "0HNDFSBA52ESV" accepted.
2025-06-20 15:11:31.612 +05:00 [DBG] Connection id "0HNDFSBA52ESV" started.
2025-06-20 15:11:31.612 +05:00 [DBG] Connection id "0HNDFSBA52ESU" started.
2025-06-20 15:11:31.626 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:11:31.626 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:11:31.634 +05:00 [DBG] Connection id "0HNDFSBA52ESU" stopped.
2025-06-20 15:11:31.634 +05:00 [DBG] Connection id "0HNDFSBA52ESV" stopped.
2025-06-20 15:11:31.639 +05:00 [DBG] Connection id "0HNDFSBA52ESV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:11:31.639 +05:00 [DBG] Connection id "0HNDFSBA52ESU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:11:33.016 +05:00 [DBG] Connection id "0HNDFSBA52ET0" accepted.
2025-06-20 15:11:33.017 +05:00 [DBG] Connection id "0HNDFSBA52ET0" started.
2025-06-20 15:11:33.046 +05:00 [DBG] Connection 0HNDFSBA52ET0 established using the following protocol: "Tls13"
2025-06-20 15:11:33.082 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:11:33.082 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/index.html - null null
2025-06-20 15:11:33.098 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:11:33.101 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 20.2583ms
2025-06-20 15:11:33.189 +05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 15:11:33.207 +05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-20 15:11:33.208 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:11:33.230 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:11:33.230 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:11:33.230 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:11:33.250 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.013 seconds with status code 200
2025-06-20 15:11:33.255 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.9014ms
2025-06-20 15:11:33.280 +05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-06-20 15:11:33.282 +05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-06-20 15:11:33.293 +05:00 [INF] Request to /swagger/index.html took 0.08 seconds with status code 200
2025-06-20 15:11:33.295 +05:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-06-20 15:11:33.296 +05:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-06-20 15:11:33.297 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/index.html - 200 null text/html;charset=utf-8 216.899ms
2025-06-20 15:11:33.323 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:11:33.323 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_vs/browserLink - null null
2025-06-20 15:11:33.327 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:11:33.332 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 9.1395ms
2025-06-20 15:11:33.419 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_vs/browserLink - 200 null text/javascript; charset=UTF-8 95.302ms
2025-06-20 15:11:33.457 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:11:33.457 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:11:33.457 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:11:33.472 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.012 seconds with status code 200
2025-06-20 15:11:33.473 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.7952ms
2025-06-20 15:11:35.467 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:11:35.469 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:11:35.470 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 2.9862ms
2025-06-20 15:11:35.656 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:11:35.657 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:11:35.657 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:11:35.664 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.005 seconds with status code 200
2025-06-20 15:11:35.664 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.0092ms
2025-06-20 15:11:36.357 +05:00 [DBG] Connection id "0HNDFSBA52ET0" received FIN.
2025-06-20 15:11:36.363 +05:00 [DBG] The connection queue processing loop for 0HNDFSBA52ET0 completed.
2025-06-20 15:11:36.370 +05:00 [DBG] Connection id "0HNDFSBA52ET0" is closed. The last processed stream ID was 15.
2025-06-20 15:11:36.371 +05:00 [DBG] Connection id "0HNDFSBA52ET0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:11:36.378 +05:00 [DBG] Connection id "0HNDFSBA52ET0" stopped.
2025-06-20 15:11:48.025 +05:00 [DBG] Connection id "0HNDFSBA52ET1" accepted.
2025-06-20 15:11:48.025 +05:00 [DBG] Connection id "0HNDFSBA52ET1" started.
2025-06-20 15:11:48.037 +05:00 [DBG] Connection 0HNDFSBA52ET1 established using the following protocol: "Tls13"
2025-06-20 15:11:48.040 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 15:11:48.045 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 15:11:48.047 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 15:11:48.048 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:11:48.049 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:11:48.052 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:11:48.076 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:11:48.078 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:11:48.078 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:11:48.078 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:11:48.078 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:11:48.079 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:11:48.080 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:11:48.141 +05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 15:11:48.268 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:11:48.271 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:11:48.273 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 15:11:48.273 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 15:11:48.279 +05:00 [DBG] Connection id "0HNDFSBA52ET1", Request id "0HNDFSBA52ET1:00000001": started reading request body.
2025-06-20 15:11:48.280 +05:00 [DBG] Connection id "0HNDFSBA52ET1", Request id "0HNDFSBA52ET1:00000001": done reading request body.
2025-06-20 15:11:48.291 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 15:11:48.292 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:11:48.292 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:11:48.292 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:11:48.297 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:12:11.896 +05:00 [DBG] The index {'BookingId'} was not created on entity type 'BookingRoom' as the properties are already covered by the index {'BookingId', 'RoomId'}.
2025-06-20 15:12:11.897 +05:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-06-20 15:12:12.058 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:12:12.087 +05:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2025-06-20 15:12:12.319 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Hotel>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Hotel entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Hotel instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Hotel);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Hotel.HotelId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Hotel)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]: 
                            {
                                return 
                                {
                                    Hotel instance;
                                    instance = new Hotel();
                                    instance.<HotelId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<HotelName>k__BackingField = dataReader.GetString(2);
                                    instance.<Location>k__BackingField = dataReader.GetString(3);
                                    instance.<PhoneNumber>k__BackingField = dataReader.GetString(4);
                                    instance.<StarRating>k__BackingField = dataReader.GetInt32(5);
                                    instance.<TotalRooms>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Hotel)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 15:12:12.345 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:12:12.348 +05:00 [DBG] Created DbConnection. (1ms).
2025-06-20 15:12:12.351 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:12.364 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:12.380 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:12:12.382 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-20 15:12:12.385 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-06-20 15:12:12.391 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:12:12.413 +05:00 [INF] Executed DbCommand (23ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:12:12.440 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:12:12.496 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:12.504 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 85ms reading results.
2025-06-20 15:12:12.511 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:12.513 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (3ms).
2025-06-20 15:12:42.346 +05:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Review.ReviewId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:12:42.363 +05:00 [DBG] The navigation 'Review.Hotel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:12:42.370 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:12:44.880 +05:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-06-20 15:12:44.882 +05:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-06-20 15:12:44.893 +05:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-06-20 15:12:44.926 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:44.926 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:44.929 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:12:44.929 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:12:44.930 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 15:12:44.930 +05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:12:44.949 +05:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:12:44.954 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:44.954 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-06-20 15:12:44.955 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:44.955 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:12:44.962 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'HotelBookingSystem.Infrastructure.Persistence.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9118607c-1542-4d77-b0a1-c318b994a0a4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:9118607c-1542-4d77-b0a1-c318b994a0a4
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-20 15:12:45.051 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 56969.5016ms
2025-06-20 15:12:45.051 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:12:45.125 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:12:45.128 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:12:45.129 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:12:45.130 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 500 null application/json 57090.5902ms
2025-06-20 15:13:21.630 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Review/get-by-hotel-id?hotelId=1 - null null
2025-06-20 15:13:21.632 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/get-by-hotel-id'
2025-06-20 15:13:21.632 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)' with route pattern 'api/Review/get-by-hotel-id' is valid for the request path '/api/Review/get-by-hotel-id'
2025-06-20 15:13:21.633 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:13:21.635 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:13:21.636 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:13:21.645 +05:00 [INF] Route matched with {action = "GetByHotelId", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.ICollection`1[HotelBookingSystem.Application.Dtos.ReviewDtos.ReviewDto]] GetByHotelId(Int64) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:13:21.645 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:13:21.645 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:13:21.645 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:13:21.645 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:13:21.645 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:13:21.645 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:13:21.646 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:13:21.650 +05:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int64' ...
2025-06-20 15:13:21.651 +05:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int64' using the name 'hotelId' in request data ...
2025-06-20 15:13:21.652 +05:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:13:21.652 +05:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:13:21.652 +05:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int64' ...
2025-06-20 15:13:21.653 +05:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:13:21.662 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:13:21.664 +05:00 [DBG] Compiling query expression: 
'DbSet<Review>()
    .Where(r => r.HotelId == __hotelId_0)'
2025-06-20 15:13:21.668 +05:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Review>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.ReviewId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Comment (string) MaxLength(1000), 1], [Property: Review.CreatedAt (DateTime) Required, 2], [Property: Review.HotelId (long) Required FK Index, 3], [Property: Review.IsVisible (bool) Required Sentinel:True ValueGenerated.OnAdd, 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (long) Required FK Index, 6] }
        SELECT r.ReviewId, r.Comment, r.CreatedAt, r.HotelId, r.IsVisible, r.Rating, r.UserId
        FROM Reviews AS r
        WHERE r.HotelId == @__hotelId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.ReviewId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Comment (string) MaxLength(1000), 1], [Property: Review.CreatedAt (DateTime) Required, 2], [Property: Review.HotelId (long) Required FK Index, 3], [Property: Review.IsVisible (bool) Required Sentinel:True ValueGenerated.OnAdd, 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (long) Required FK Index, 6] }
        SELECT r.ReviewId, r.Comment, r.CreatedAt, r.HotelId, r.IsVisible, r.Rating, r.UserId
        FROM Reviews AS r
        WHERE r.HotelId == @__hotelId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Review entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Review instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Review);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Review.ReviewId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Review)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")]: 
                        {
                            return 
                            {
                                Review instance;
                                instance = new Review();
                                instance.<ReviewId>k__BackingField = dataReader.GetInt64(0);
                                instance.<Comment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<HotelId>k__BackingField = dataReader.GetInt64(3);
                                instance.<IsVisible>k__BackingField = dataReader.GetBoolean(4);
                                instance.<Rating>k__BackingField = dataReader.GetInt32(5);
                                instance.<UserId>k__BackingField = dataReader.GetInt64(6);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Review)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 15:13:21.669 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:13:21.669 +05:00 [DBG] Created DbConnection. (0ms).
2025-06-20 15:13:21.669 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:21.669 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:21.669 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:13:21.670 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:13:21.670 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:13:21.670 +05:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2025-06-20 15:13:21.676 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hotelId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2025-06-20 15:13:21.676 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:21.677 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 15:13:21.677 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:21.677 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:13:21.725 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web) in 80.2187ms
2025-06-20 15:13:21.726 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:13:21.784 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:13:21.784 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:21.785 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:13:21.785 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Review/get-by-hotel-id?hotelId=1 - 500 null application/json 154.7485ms
2025-06-20 15:13:27.029 +05:00 [DBG] Connection id "0HNDFSBA52ET1" received FIN.
2025-06-20 15:13:27.030 +05:00 [DBG] Connection id "0HNDFSBA52ET1" is closed. The last processed stream ID was 3.
2025-06-20 15:13:27.030 +05:00 [DBG] Connection id "0HNDFSBA52ET1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:13:27.031 +05:00 [DBG] The connection queue processing loop for 0HNDFSBA52ET1 completed.
2025-06-20 15:13:27.032 +05:00 [DBG] Connection id "0HNDFSBA52ET1" stopped.
2025-06-20 15:13:39.647 +05:00 [DBG] Connection id "0HNDFSBA52ET2" accepted.
2025-06-20 15:13:39.648 +05:00 [DBG] Connection id "0HNDFSBA52ET2" started.
2025-06-20 15:13:39.656 +05:00 [DBG] Connection 0HNDFSBA52ET2 established using the following protocol: "Tls13"
2025-06-20 15:13:39.657 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Review/get-by-hotel-id?hotelId=2 - null null
2025-06-20 15:13:39.657 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/get-by-hotel-id'
2025-06-20 15:13:39.657 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)' with route pattern 'api/Review/get-by-hotel-id' is valid for the request path '/api/Review/get-by-hotel-id'
2025-06-20 15:13:39.658 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:13:39.659 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:13:39.659 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:13:39.662 +05:00 [INF] Route matched with {action = "GetByHotelId", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.ICollection`1[HotelBookingSystem.Application.Dtos.ReviewDtos.ReviewDto]] GetByHotelId(Int64) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:13:39.662 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:13:39.665 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:13:39.665 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:13:39.665 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:13:39.665 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:13:39.665 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:13:39.669 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:13:39.670 +05:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int64' ...
2025-06-20 15:13:39.670 +05:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int64' using the name 'hotelId' in request data ...
2025-06-20 15:13:39.670 +05:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:13:39.670 +05:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:13:39.670 +05:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int64' ...
2025-06-20 15:13:39.670 +05:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:13:39.709 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:13:39.712 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:13:39.712 +05:00 [DBG] Created DbConnection. (0ms).
2025-06-20 15:13:39.712 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:39.712 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:39.712 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:13:39.712 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:13:39.713 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:13:39.713 +05:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2025-06-20 15:13:39.716 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__hotelId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2025-06-20 15:13:39.717 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:39.717 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 15:13:39.717 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:39.717 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:13:39.751 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web) in 86.0911ms
2025-06-20 15:13:39.752 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:13:39.816 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:13:39.816 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:13:39.816 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:13:39.816 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Review/get-by-hotel-id?hotelId=2 - 500 null application/json 159.3822ms
2025-06-20 15:13:47.189 +05:00 [DBG] Connection id "0HNDFSBA52ET2" received FIN.
2025-06-20 15:13:47.190 +05:00 [DBG] Connection id "0HNDFSBA52ET2" is closed. The last processed stream ID was 1.
2025-06-20 15:13:47.190 +05:00 [DBG] Connection id "0HNDFSBA52ET2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:13:47.190 +05:00 [DBG] The connection queue processing loop for 0HNDFSBA52ET2 completed.
2025-06-20 15:13:47.191 +05:00 [DBG] Connection id "0HNDFSBA52ET2" stopped.
2025-06-20 15:18:01.856 +05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 15:18:01.917 +05:00 [DBG] Hosting starting
2025-06-20 15:18:01.925 +05:00 [DBG] Middleware loaded
2025-06-20 15:18:01.927 +05:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16529 B).
2025-06-20 15:18:01.929 +05:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-06-20 15:18:02.023 +05:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-20 15:18:02.076 +05:00 [INF] Now listening on: https://localhost:7276
2025-06-20 15:18:02.076 +05:00 [INF] Now listening on: http://localhost:5117
2025-06-20 15:18:02.082 +05:00 [DBG] Loaded hosting startup assembly HotelBookingSystem.Web
2025-06-20 15:18:02.086 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-06-20 15:18:02.086 +05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-20 15:18:02.086 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-06-20 15:18:02.165 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 15:18:02.165 +05:00 [INF] Hosting environment: Development
2025-06-20 15:18:02.166 +05:00 [INF] Content root path: C:\Users\WINDOWS 11\source\repos\HotelBookingSystem\HotelBookingSystem\src\HotelBookingSystem.Web
2025-06-20 15:18:02.166 +05:00 [DBG] Hosting started
2025-06-20 15:18:02.434 +05:00 [DBG] Connection id "0HNDFSEUKA5EJ" accepted.
2025-06-20 15:18:02.434 +05:00 [DBG] Connection id "0HNDFSEUKA5EI" accepted.
2025-06-20 15:18:02.435 +05:00 [DBG] Connection id "0HNDFSEUKA5EI" started.
2025-06-20 15:18:02.435 +05:00 [DBG] Connection id "0HNDFSEUKA5EJ" started.
2025-06-20 15:18:02.443 +05:00 [DBG] Connection id "0HNDFSEUKA5EJ" received FIN.
2025-06-20 15:18:02.443 +05:00 [DBG] Connection id "0HNDFSEUKA5EI" received FIN.
2025-06-20 15:18:02.470 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:18:02.470 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:18:02.478 +05:00 [DBG] Connection id "0HNDFSEUKA5EJ" stopped.
2025-06-20 15:18:02.478 +05:00 [DBG] Connection id "0HNDFSEUKA5EI" stopped.
2025-06-20 15:18:02.484 +05:00 [DBG] Connection id "0HNDFSEUKA5EJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:18:02.484 +05:00 [DBG] Connection id "0HNDFSEUKA5EI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:18:02.595 +05:00 [DBG] Connection id "0HNDFSEUKA5EK" accepted.
2025-06-20 15:18:02.595 +05:00 [DBG] Connection id "0HNDFSEUKA5EK" started.
2025-06-20 15:18:02.639 +05:00 [DBG] Connection 0HNDFSEUKA5EK established using the following protocol: "Tls13"
2025-06-20 15:18:02.705 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/index.html - null null
2025-06-20 15:18:02.824 +05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 15:18:02.845 +05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-20 15:18:02.846 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:18:02.925 +05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-06-20 15:18:02.926 +05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-06-20 15:18:02.953 +05:00 [INF] Request to /swagger/index.html took 0.093 seconds with status code 200
2025-06-20 15:18:02.955 +05:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-06-20 15:18:02.957 +05:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-06-20 15:18:02.960 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/index.html - 200 null text/html;charset=utf-8 258.2549ms
2025-06-20 15:18:02.992 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:18:02.997 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:18:02.999 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_vs/browserLink - null null
2025-06-20 15:18:03.000 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 7.5304ms
2025-06-20 15:18:03.060 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.9848ms
2025-06-20 15:18:03.179 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:18:03.180 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:18:03.180 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:18:03.201 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.018 seconds with status code 200
2025-06-20 15:18:03.209 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.6232ms
2025-06-20 15:18:07.600 +05:00 [DBG] Connection id "0HNDFSEUKA5EK" received FIN.
2025-06-20 15:18:07.603 +05:00 [DBG] The connection queue processing loop for 0HNDFSEUKA5EK completed.
2025-06-20 15:18:07.605 +05:00 [DBG] Connection id "0HNDFSEUKA5EK" is closed. The last processed stream ID was 7.
2025-06-20 15:18:07.605 +05:00 [DBG] Connection id "0HNDFSEUKA5EK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:18:07.619 +05:00 [DBG] Connection id "0HNDFSEUKA5EK" stopped.
2025-06-20 15:18:30.419 +05:00 [DBG] Connection id "0HNDFSEUKA5EL" accepted.
2025-06-20 15:18:30.421 +05:00 [DBG] Connection id "0HNDFSEUKA5EL" started.
2025-06-20 15:18:30.435 +05:00 [DBG] Connection 0HNDFSEUKA5EL established using the following protocol: "Tls13"
2025-06-20 15:18:30.438 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 56
2025-06-20 15:18:30.443 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 15:18:30.453 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 15:18:30.455 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:18:30.457 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:18:30.459 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:18:30.485 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:18:30.487 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:18:30.487 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:18:30.488 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:18:30.488 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:18:30.488 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:18:30.489 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:18:30.561 +05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 15:18:30.716 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:18:30.720 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:18:30.722 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 15:18:30.723 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 15:18:30.729 +05:00 [DBG] Connection id "0HNDFSEUKA5EL", Request id "0HNDFSEUKA5EL:00000001": started reading request body.
2025-06-20 15:18:30.729 +05:00 [DBG] Connection id "0HNDFSEUKA5EL", Request id "0HNDFSEUKA5EL:00000001": done reading request body.
2025-06-20 15:18:30.741 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 15:18:30.742 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:18:30.742 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:18:30.743 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:18:30.748 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:20:30.753 +05:00 [DBG] The index {'BookingId'} was not created on entity type 'BookingRoom' as the properties are already covered by the index {'BookingId', 'RoomId'}.
2025-06-20 15:20:30.753 +05:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-06-20 15:20:30.911 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:20:30.933 +05:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2025-06-20 15:20:31.126 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Hotel>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Hotel entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Hotel instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Hotel);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Hotel.HotelId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Hotel)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]: 
                            {
                                return 
                                {
                                    Hotel instance;
                                    instance = new Hotel();
                                    instance.<HotelId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<HotelName>k__BackingField = dataReader.GetString(2);
                                    instance.<Location>k__BackingField = dataReader.GetString(3);
                                    instance.<PhoneNumber>k__BackingField = dataReader.GetString(4);
                                    instance.<StarRating>k__BackingField = dataReader.GetInt32(5);
                                    instance.<TotalRooms>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Hotel)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 15:20:31.155 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:20:31.158 +05:00 [DBG] Created DbConnection. (1ms).
2025-06-20 15:20:31.160 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:20:33.109 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:20:33.113 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:20:33.115 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-20 15:20:33.119 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-06-20 15:20:33.124 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:20:33.154 +05:00 [INF] Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:20:33.180 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:20:33.196 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:20:33.201 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 43ms reading results.
2025-06-20 15:20:33.204 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:20:33.205 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (1ms).
2025-06-20 15:20:50.681 +05:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Review.ReviewId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:20:50.712 +05:00 [DBG] The navigation 'Review.Hotel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:20:50.722 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:20:54.433 +05:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-06-20 15:20:54.435 +05:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-06-20 15:20:54.447 +05:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-06-20 15:20:54.481 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:20:54.481 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:20:54.484 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:20:54.484 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:20:54.485 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 15:20:54.485 +05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:20:54.505 +05:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:20:54.511 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:20:54.511 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2025-06-20 15:20:54.512 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:20:54.512 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:20:54.519 +05:00 [ERR] An exception occurred in the database while saving changes for context type 'HotelBookingSystem.Infrastructure.Persistence.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ea75574c-303c-4b50-ae19-86f0cb8db7e0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Reviews_Users_UserId". The conflict occurred in database "HotelBooking", table "dbo.Users", column 'UserId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:ea75574c-303c-4b50-ae19-86f0cb8db7e0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-20 15:29:26.677 +05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-20 15:29:26.725 +05:00 [DBG] Hosting starting
2025-06-20 15:29:26.732 +05:00 [DBG] Middleware loaded
2025-06-20 15:29:26.734 +05:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16529 B).
2025-06-20 15:29:26.735 +05:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-06-20 15:29:26.828 +05:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-06-20 15:29:26.894 +05:00 [INF] Now listening on: https://localhost:7276
2025-06-20 15:29:26.904 +05:00 [INF] Now listening on: http://localhost:5117
2025-06-20 15:29:26.905 +05:00 [DBG] Loaded hosting startup assembly HotelBookingSystem.Web
2025-06-20 15:29:26.905 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2025-06-20 15:29:26.905 +05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-06-20 15:29:26.905 +05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2025-06-20 15:29:26.978 +05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-20 15:29:26.979 +05:00 [INF] Hosting environment: Development
2025-06-20 15:29:26.979 +05:00 [INF] Content root path: C:\Users\WINDOWS 11\source\repos\HotelBookingSystem\HotelBookingSystem\src\HotelBookingSystem.Web
2025-06-20 15:29:26.979 +05:00 [DBG] Hosting started
2025-06-20 15:29:27.159 +05:00 [DBG] Connection id "0HNDFSLAMBOKO" accepted.
2025-06-20 15:29:27.159 +05:00 [DBG] Connection id "0HNDFSLAMBOKP" accepted.
2025-06-20 15:29:27.166 +05:00 [DBG] Connection id "0HNDFSLAMBOKO" started.
2025-06-20 15:29:27.169 +05:00 [DBG] Connection id "0HNDFSLAMBOKP" started.
2025-06-20 15:29:27.170 +05:00 [DBG] Connection id "0HNDFSLAMBOKP" received FIN.
2025-06-20 15:29:27.170 +05:00 [DBG] Connection id "0HNDFSLAMBOKO" received FIN.
2025-06-20 15:29:27.182 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:29:27.182 +05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2025-06-20 15:29:27.192 +05:00 [DBG] Connection id "0HNDFSLAMBOKP" stopped.
2025-06-20 15:29:27.192 +05:00 [DBG] Connection id "0HNDFSLAMBOKO" stopped.
2025-06-20 15:29:27.199 +05:00 [DBG] Connection id "0HNDFSLAMBOKO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:29:27.199 +05:00 [DBG] Connection id "0HNDFSLAMBOKP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:29:27.539 +05:00 [DBG] Connection id "0HNDFSLAMBOKQ" accepted.
2025-06-20 15:29:27.539 +05:00 [DBG] Connection id "0HNDFSLAMBOKQ" started.
2025-06-20 15:29:27.586 +05:00 [DBG] Connection 0HNDFSLAMBOKQ established using the following protocol: "Tls13"
2025-06-20 15:29:27.639 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/index.html - null null
2025-06-20 15:29:27.773 +05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-06-20 15:29:27.796 +05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-06-20 15:29:27.799 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:29:27.874 +05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2025-06-20 15:29:27.877 +05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-06-20 15:29:27.900 +05:00 [INF] Request to /swagger/index.html took 0.089 seconds with status code 200
2025-06-20 15:29:27.902 +05:00 [DBG] Response markup was updated to include Browser Link script injection.
2025-06-20 15:29:27.904 +05:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-06-20 15:29:27.912 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/index.html - 200 null text/html;charset=utf-8 272.6657ms
2025-06-20 15:29:27.950 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - null null
2025-06-20 15:29:27.950 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/_vs/browserLink - null null
2025-06-20 15:29:27.957 +05:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-06-20 15:29:27.959 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_framework/aspnetcore-browser-refresh.js - 200 16529 application/javascript; charset=utf-8 8.6938ms
2025-06-20 15:29:28.035 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/_vs/browserLink - 200 null text/javascript; charset=UTF-8 85.1454ms
2025-06-20 15:29:28.113 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-06-20 15:29:28.114 +05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-06-20 15:29:28.114 +05:00 [DBG] Request did not match any endpoints
2025-06-20 15:29:28.143 +05:00 [INF] Request to /swagger/v1/swagger.json took 0.025 seconds with status code 200
2025-06-20 15:29:28.152 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 38.952ms
2025-06-20 15:29:33.741 +05:00 [DBG] Connection id "0HNDFSLAMBOKQ" received FIN.
2025-06-20 15:29:33.745 +05:00 [DBG] The connection queue processing loop for 0HNDFSLAMBOKQ completed.
2025-06-20 15:29:33.750 +05:00 [DBG] Connection id "0HNDFSLAMBOKQ" is closed. The last processed stream ID was 7.
2025-06-20 15:29:33.751 +05:00 [DBG] Connection id "0HNDFSLAMBOKQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:29:33.757 +05:00 [DBG] Connection id "0HNDFSLAMBOKQ" stopped.
2025-06-20 15:30:07.630 +05:00 [DBG] Connection id "0HNDFSLAMBOKR" accepted.
2025-06-20 15:30:07.631 +05:00 [DBG] Connection id "0HNDFSLAMBOKR" started.
2025-06-20 15:30:07.648 +05:00 [DBG] Connection 0HNDFSLAMBOKR established using the following protocol: "Tls13"
2025-06-20 15:30:07.650 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 73
2025-06-20 15:30:07.657 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 15:30:07.669 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 15:30:07.669 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:30:07.673 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:30:07.675 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:30:07.700 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:30:07.701 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:30:07.701 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:30:07.701 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:30:07.701 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:30:07.702 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:30:07.703 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:30:07.782 +05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-06-20 15:30:07.922 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:30:07.927 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:30:07.928 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 15:30:07.929 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 15:30:07.936 +05:00 [DBG] Connection id "0HNDFSLAMBOKR", Request id "0HNDFSLAMBOKR:00000001": started reading request body.
2025-06-20 15:30:07.936 +05:00 [DBG] Connection id "0HNDFSLAMBOKR", Request id "0HNDFSLAMBOKR:00000001": done reading request body.
2025-06-20 15:30:07.950 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 15:30:07.951 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:30:07.951 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:30:07.951 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:30:07.958 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:30:08.422 +05:00 [DBG] The index {'BookingId'} was not created on entity type 'BookingRoom' as the properties are already covered by the index {'BookingId', 'RoomId'}.
2025-06-20 15:30:08.423 +05:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-06-20 15:30:08.595 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:30:08.616 +05:00 [DBG] Compiling query expression: 
'DbSet<Hotel>()
    .FirstOrDefault(h => h.HotelId == __id_0)'
2025-06-20 15:30:08.836 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Hotel>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Hotel>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Hotel.HotelId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Hotel.Description (string) MaxLength(500), 1], [Property: Hotel.HotelName (string) Required MaxLength(100), 2], [Property: Hotel.Location (string) Required MaxLength(200), 3], [Property: Hotel.PhoneNumber (string) Required MaxLength(15), 4], [Property: Hotel.StarRating (int) Required, 5], [Property: Hotel.TotalRooms (int) Required, 6] }
            SELECT TOP(1) h.HotelId, h.Description, h.HotelName, h.Location, h.PhoneNumber, h.StarRating, h.TotalRooms
            FROM Hotels AS h
            WHERE h.HotelId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Hotel entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Hotel instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Hotel);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Hotel.HotelId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Hotel)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]: 
                            {
                                return 
                                {
                                    Hotel instance;
                                    instance = new Hotel();
                                    instance.<HotelId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Description>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<HotelName>k__BackingField = dataReader.GetString(2);
                                    instance.<Location>k__BackingField = dataReader.GetString(3);
                                    instance.<PhoneNumber>k__BackingField = dataReader.GetString(4);
                                    instance.<StarRating>k__BackingField = dataReader.GetInt32(5);
                                    instance.<TotalRooms>k__BackingField = dataReader.GetInt32(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Hotel | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Hotel")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Hotel)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 15:30:08.878 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:30:08.883 +05:00 [DBG] Created DbConnection. (2ms).
2025-06-20 15:30:08.887 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:08.908 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:08.913 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:30:08.916 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-06-20 15:30:08.921 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-06-20 15:30:08.931 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:30:08.964 +05:00 [INF] Executed DbCommand (37ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:30:09.008 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:09.033 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.041 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 70ms reading results.
2025-06-20 15:30:09.045 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.047 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (1ms).
2025-06-20 15:30:09.051 +05:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.UserId == __id_0)'
2025-06-20 15:30:09.059 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: SingleQueryingEnumerable.Create<User>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required Index MaxLength(320), 1], [Property: User.FirstName (string) Required MaxLength(50), 2], [Property: User.LastName (string) Required MaxLength(50), 3], [Property: User.Password (string) Required MaxLength(100), 4], [Property: User.PasswordHash (string), 5], [Property: User.PhoneNumber (string) Required MaxLength(15), 6], [Property: User.Salt (string), 7] }
            SELECT TOP(1) u.UserId, u.Email, u.FirstName, u.LastName, u.Password, u.PasswordHash, u.PhoneNumber, u.Salt
            FROM Users AS u
            WHERE u.UserId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Email (string) Required Index MaxLength(320), 1], [Property: User.FirstName (string) Required MaxLength(50), 2], [Property: User.LastName (string) Required MaxLength(50), 3], [Property: User.Password (string) Required MaxLength(100), 4], [Property: User.PasswordHash (string), 5], [Property: User.PhoneNumber (string) Required MaxLength(15), 6], [Property: User.Salt (string), 7] }
            SELECT TOP(1) u.UserId, u.Email, u.FirstName, u.LastName, u.Password, u.PasswordHash, u.PhoneNumber, u.Salt
            FROM Users AS u
            WHERE u.UserId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            User entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                User instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(User);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: User.UserId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.User").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (User)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.User")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.User")]: 
                            {
                                return 
                                {
                                    User instance;
                                    instance = new User();
                                    instance.<UserId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Email>k__BackingField = dataReader.GetString(1);
                                    instance.<FirstName>k__BackingField = dataReader.GetString(2);
                                    instance.<LastName>k__BackingField = dataReader.GetString(3);
                                    instance.<Password>k__BackingField = dataReader.GetString(4);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<PhoneNumber>k__BackingField = dataReader.GetString(6);
                                    instance.<Salt>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: User | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.User")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(User)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 15:30:09.061 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.062 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.062 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:30:09.062 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:30:09.062 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:30:09.063 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PasswordHash], [u].[PhoneNumber], [u].[Salt]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__id_0
2025-06-20 15:30:09.075 +05:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PasswordHash], [u].[PhoneNumber], [u].[Salt]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__id_0
2025-06-20 15:30:09.084 +05:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:09.097 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.097 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 21ms reading results.
2025-06-20 15:30:09.097 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.098 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:30:09.126 +05:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Review.ReviewId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:09.149 +05:00 [DBG] The navigation 'Review.Hotel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:09.160 +05:00 [DBG] The navigation 'Review.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:09.162 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:09.164 +05:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-06-20 15:30:09.166 +05:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-06-20 15:30:09.187 +05:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-06-20 15:30:09.239 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.240 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.242 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:30:09.242 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:30:09.243 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-06-20 15:30:09.243 +05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:30:09.251 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:30:09.263 +05:00 [DBG] The foreign key property 'Review.ReviewId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-20 15:30:09.267 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.267 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 16ms reading results.
2025-06-20 15:30:09.269 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.269 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:30:09.280 +05:00 [DBG] An entity of type 'Review' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:09.281 +05:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-06-20 15:30:09.286 +05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 15:30:09.288 +05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-06-20 15:30:09.289 +05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-06-20 15:30:09.289 +05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 15:30:09.289 +05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 15:30:09.291 +05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 15:30:09.291 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Int64'.
2025-06-20 15:30:09.297 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 1592.5145ms
2025-06-20 15:30:09.298 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:30:09.298 +05:00 [INF] Request to /api/Review/create took 1.626 seconds with status code 200
2025-06-20 15:30:09.301 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:30:09.306 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:09.307 +05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-06-20 15:30:09.308 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 200 null application/json; charset=utf-8 1657.8579ms
2025-06-20 15:30:13.801 +05:00 [DBG] Connection id "0HNDFSLAMBOKR" received FIN.
2025-06-20 15:30:13.802 +05:00 [DBG] Connection id "0HNDFSLAMBOKR" is closed. The last processed stream ID was 1.
2025-06-20 15:30:13.802 +05:00 [DBG] Connection id "0HNDFSLAMBOKR" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:30:13.802 +05:00 [DBG] The connection queue processing loop for 0HNDFSLAMBOKR completed.
2025-06-20 15:30:13.816 +05:00 [DBG] Connection id "0HNDFSLAMBOKR" stopped.
2025-06-20 15:30:27.007 +05:00 [DBG] Connection id "0HNDFSLAMBOKS" accepted.
2025-06-20 15:30:27.007 +05:00 [DBG] Connection id "0HNDFSLAMBOKS" started.
2025-06-20 15:30:27.012 +05:00 [DBG] Connection 0HNDFSLAMBOKS established using the following protocol: "Tls13"
2025-06-20 15:30:27.016 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Review/get-by-hotel-id?hotelId=1 - null null
2025-06-20 15:30:27.018 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/get-by-hotel-id'
2025-06-20 15:30:27.018 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)' with route pattern 'api/Review/get-by-hotel-id' is valid for the request path '/api/Review/get-by-hotel-id'
2025-06-20 15:30:27.018 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:30:27.018 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:30:27.019 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:30:27.024 +05:00 [INF] Route matched with {action = "GetByHotelId", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.ICollection`1[HotelBookingSystem.Application.Dtos.ReviewDtos.ReviewDto]] GetByHotelId(Int64) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:30:27.024 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:30:27.024 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:30:27.024 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:30:27.024 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:30:27.024 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:30:27.025 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:30:27.026 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:30:27.030 +05:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int64' ...
2025-06-20 15:30:27.031 +05:00 [DBG] Attempting to bind parameter 'hotelId' of type 'System.Int64' using the name 'hotelId' in request data ...
2025-06-20 15:30:27.033 +05:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:30:27.033 +05:00 [DBG] Done attempting to bind parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:30:27.033 +05:00 [DBG] Attempting to validate the bound parameter 'hotelId' of type 'System.Int64' ...
2025-06-20 15:30:27.033 +05:00 [DBG] Done attempting to validate the bound parameter 'hotelId' of type 'System.Int64'.
2025-06-20 15:30:27.047 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:30:27.051 +05:00 [DBG] Compiling query expression: 
'DbSet<Review>()
    .Where(r => r.HotelId == __hotelId_0)'
2025-06-20 15:30:27.058 +05:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Review>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.ReviewId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Comment (string) MaxLength(1000), 1], [Property: Review.CreatedAt (DateTime) Required, 2], [Property: Review.HotelId (long) Required FK Index, 3], [Property: Review.IsVisible (bool) Required Sentinel:True ValueGenerated.OnAdd, 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (long) Required FK Index, 6] }
        SELECT r.ReviewId, r.Comment, r.CreatedAt, r.HotelId, r.IsVisible, r.Rating, r.UserId
        FROM Reviews AS r
        WHERE r.HotelId == @__hotelId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.ReviewId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Comment (string) MaxLength(1000), 1], [Property: Review.CreatedAt (DateTime) Required, 2], [Property: Review.HotelId (long) Required FK Index, 3], [Property: Review.IsVisible (bool) Required Sentinel:True ValueGenerated.OnAdd, 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (long) Required FK Index, 6] }
        SELECT r.ReviewId, r.Comment, r.CreatedAt, r.HotelId, r.IsVisible, r.Rating, r.UserId
        FROM Reviews AS r
        WHERE r.HotelId == @__hotelId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Review entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Review instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Review);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Review.ReviewId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Review)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")]: 
                        {
                            return 
                            {
                                Review instance;
                                instance = new Review();
                                instance.<ReviewId>k__BackingField = dataReader.GetInt64(0);
                                instance.<Comment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<HotelId>k__BackingField = dataReader.GetInt64(3);
                                instance.<IsVisible>k__BackingField = dataReader.GetBoolean(4);
                                instance.<Rating>k__BackingField = dataReader.GetInt32(5);
                                instance.<UserId>k__BackingField = dataReader.GetInt64(6);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Review)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 15:30:27.059 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:30:27.060 +05:00 [DBG] Created DbConnection. (0ms).
2025-06-20 15:30:27.060 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:27.061 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:27.061 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:30:27.061 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:30:27.062 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:30:27.062 +05:00 [DBG] Executing DbCommand [Parameters=[@__hotelId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2025-06-20 15:30:27.069 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@__hotelId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[HotelId] = @__hotelId_0
2025-06-20 15:30:27.071 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:27.072 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:27.072 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2025-06-20 15:30:27.072 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:27.072 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:30:27.080 +05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 15:30:27.080 +05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-06-20 15:30:27.081 +05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-06-20 15:30:27.081 +05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 15:30:27.081 +05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 15:30:27.081 +05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 15:30:27.081 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelBookingSystem.Application.Dtos.ReviewDtos.ReviewDto, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 15:30:27.088 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web) in 63.6457ms
2025-06-20 15:30:27.088 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByHotelId (HotelBookingSystem.Web)'
2025-06-20 15:30:27.089 +05:00 [INF] Request to /api/Review/get-by-hotel-id took 0.07 seconds with status code 200
2025-06-20 15:30:27.089 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:30:27.089 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:27.089 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:30:27.089 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Review/get-by-hotel-id?hotelId=1 - 200 null application/json; charset=utf-8 73.7158ms
2025-06-20 15:30:33.820 +05:00 [DBG] Connection id "0HNDFSLAMBOKS" received FIN.
2025-06-20 15:30:33.821 +05:00 [DBG] Connection id "0HNDFSLAMBOKS" is closed. The last processed stream ID was 1.
2025-06-20 15:30:33.821 +05:00 [DBG] Connection id "0HNDFSLAMBOKS" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:30:33.822 +05:00 [DBG] The connection queue processing loop for 0HNDFSLAMBOKS completed.
2025-06-20 15:30:33.822 +05:00 [DBG] Connection id "0HNDFSLAMBOKS" stopped.
2025-06-20 15:30:48.063 +05:00 [DBG] Connection id "0HNDFSLAMBOKT" accepted.
2025-06-20 15:30:48.063 +05:00 [DBG] Connection id "0HNDFSLAMBOKT" started.
2025-06-20 15:30:48.070 +05:00 [DBG] Connection 0HNDFSLAMBOKT established using the following protocol: "Tls13"
2025-06-20 15:30:48.073 +05:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Review/get-by-user-id?userId=1 - null null
2025-06-20 15:30:48.073 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/get-by-user-id'
2025-06-20 15:30:48.073 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByUserId (HotelBookingSystem.Web)' with route pattern 'api/Review/get-by-user-id' is valid for the request path '/api/Review/get-by-user-id'
2025-06-20 15:30:48.073 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByUserId (HotelBookingSystem.Web)'
2025-06-20 15:30:48.073 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:30:48.073 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByUserId (HotelBookingSystem.Web)'
2025-06-20 15:30:48.076 +05:00 [INF] Route matched with {action = "GetByUserId", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.ICollection`1[HotelBookingSystem.Application.Dtos.ReviewDtos.ReviewDto]] GetByUserId(Int64) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:30:48.076 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:30:48.076 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:30:48.076 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:30:48.076 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:30:48.076 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:30:48.077 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:30:48.081 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:30:48.081 +05:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int64' ...
2025-06-20 15:30:48.082 +05:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int64' using the name 'userId' in request data ...
2025-06-20 15:30:48.082 +05:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int64'.
2025-06-20 15:30:48.082 +05:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int64'.
2025-06-20 15:30:48.082 +05:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int64' ...
2025-06-20 15:30:48.082 +05:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int64'.
2025-06-20 15:30:48.123 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:30:48.124 +05:00 [DBG] Compiling query expression: 
'DbSet<Review>()
    .Where(r => r.UserId == __userId_0)'
2025-06-20 15:30:48.127 +05:00 [DBG] Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<Review>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.ReviewId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Comment (string) MaxLength(1000), 1], [Property: Review.CreatedAt (DateTime) Required, 2], [Property: Review.HotelId (long) Required FK Index, 3], [Property: Review.IsVisible (bool) Required Sentinel:True ValueGenerated.OnAdd, 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (long) Required FK Index, 6] }
        SELECT r.ReviewId, r.Comment, r.CreatedAt, r.HotelId, r.IsVisible, r.Rating, r.UserId
        FROM Reviews AS r
        WHERE r.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.ReviewId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Comment (string) MaxLength(1000), 1], [Property: Review.CreatedAt (DateTime) Required, 2], [Property: Review.HotelId (long) Required FK Index, 3], [Property: Review.IsVisible (bool) Required Sentinel:True ValueGenerated.OnAdd, 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (long) Required FK Index, 6] }
        SELECT r.ReviewId, r.Comment, r.CreatedAt, r.HotelId, r.IsVisible, r.Rating, r.UserId
        FROM Reviews AS r
        WHERE r.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        Review entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            Review instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(Review);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: Review.ReviewId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (Review)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")]: 
                        {
                            return 
                            {
                                Review instance;
                                instance = new Review();
                                instance.<ReviewId>k__BackingField = dataReader.GetInt64(0);
                                instance.<Comment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(2);
                                instance.<HotelId>k__BackingField = dataReader.GetInt64(3);
                                instance.<IsVisible>k__BackingField = dataReader.GetBoolean(4);
                                instance.<Rating>k__BackingField = dataReader.GetInt32(5);
                                instance.<UserId>k__BackingField = dataReader.GetInt64(6);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(Review)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2025-06-20 15:30:48.128 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:30:48.128 +05:00 [DBG] Created DbConnection. (0ms).
2025-06-20 15:30:48.128 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:48.129 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:48.129 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:30:48.129 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:30:48.129 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:30:48.129 +05:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-06-20 15:30:48.135 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[UserId] = @__userId_0
2025-06-20 15:30:48.136 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:30:48.136 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:48.136 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-06-20 15:30:48.136 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:48.136 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:30:48.137 +05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 15:30:48.138 +05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-06-20 15:30:48.138 +05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-06-20 15:30:48.138 +05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 15:30:48.138 +05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 15:30:48.138 +05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 15:30:48.138 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelBookingSystem.Application.Dtos.ReviewDtos.ReviewDto, HotelBookingSystem.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-20 15:30:48.138 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.GetByUserId (HotelBookingSystem.Web) in 61.8152ms
2025-06-20 15:30:48.138 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.GetByUserId (HotelBookingSystem.Web)'
2025-06-20 15:30:48.139 +05:00 [INF] Request to /api/Review/get-by-user-id took 0.065 seconds with status code 200
2025-06-20 15:30:48.139 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:30:48.139 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:30:48.139 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:30:48.139 +05:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Review/get-by-user-id?userId=1 - 200 null application/json; charset=utf-8 66.5714ms
2025-06-20 15:30:53.833 +05:00 [DBG] Connection id "0HNDFSLAMBOKT" received FIN.
2025-06-20 15:30:53.834 +05:00 [DBG] Connection id "0HNDFSLAMBOKT" is closed. The last processed stream ID was 1.
2025-06-20 15:30:53.834 +05:00 [DBG] Connection id "0HNDFSLAMBOKT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-06-20 15:30:53.835 +05:00 [DBG] The connection queue processing loop for 0HNDFSLAMBOKT completed.
2025-06-20 15:30:53.835 +05:00 [DBG] Connection id "0HNDFSLAMBOKT" stopped.
2025-06-20 15:31:24.049 +05:00 [DBG] Connection id "0HNDFSLAMBOKU" accepted.
2025-06-20 15:31:24.049 +05:00 [DBG] Connection id "0HNDFSLAMBOKU" started.
2025-06-20 15:31:24.054 +05:00 [DBG] Connection 0HNDFSLAMBOKU established using the following protocol: "Tls13"
2025-06-20 15:31:24.056 +05:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/Review/create - application/json 71
2025-06-20 15:31:24.057 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/create'
2025-06-20 15:31:24.057 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)' with route pattern 'api/Review/create' is valid for the request path '/api/Review/create'
2025-06-20 15:31:24.057 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:31:24.058 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:31:24.059 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:31:24.061 +05:00 [INF] Route matched with {action = "Create", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Int64] Create(HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:31:24.062 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:31:24.062 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:31:24.062 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:31:24.062 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:31:24.062 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:31:24.062 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:31:24.063 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:31:24.063 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:31:24.064 +05:00 [DBG] Attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' using the name '' in request data ...
2025-06-20 15:31:24.064 +05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-06-20 15:31:24.064 +05:00 [DBG] Connection id "0HNDFSLAMBOKU", Request id "0HNDFSLAMBOKU:00000001": started reading request body.
2025-06-20 15:31:24.065 +05:00 [DBG] Connection id "0HNDFSLAMBOKU", Request id "0HNDFSLAMBOKU:00000001": done reading request body.
2025-06-20 15:31:24.065 +05:00 [DBG] JSON input formatter succeeded, deserializing to type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'
2025-06-20 15:31:24.065 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:31:24.065 +05:00 [DBG] Done attempting to bind parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:31:24.065 +05:00 [DBG] Attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto' ...
2025-06-20 15:31:24.066 +05:00 [DBG] Done attempting to validate the bound parameter 'createReviewDto' of type 'HotelBookingSystem.Application.Dtos.ReviewDtos.CreateReviewDto'.
2025-06-20 15:31:24.067 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:31:24.073 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:31:24.073 +05:00 [DBG] Created DbConnection. (0ms).
2025-06-20 15:31:24.074 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.074 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.074 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:31:24.074 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:24.074 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:24.074 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:31:24.078 +05:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [h].[HotelId], [h].[Description], [h].[HotelName], [h].[Location], [h].[PhoneNumber], [h].[StarRating], [h].[TotalRooms]
FROM [Hotels] AS [h]
WHERE [h].[HotelId] = @__id_0
2025-06-20 15:31:24.079 +05:00 [DBG] Context 'AppDbContext' started tracking 'Hotel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:24.079 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.079 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 15:31:24.079 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.079 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:31:24.080 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.080 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.080 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:31:24.080 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:24.080 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:24.080 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PasswordHash], [u].[PhoneNumber], [u].[Salt]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__id_0
2025-06-20 15:31:24.082 +05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[Email], [u].[FirstName], [u].[LastName], [u].[Password], [u].[PasswordHash], [u].[PhoneNumber], [u].[Salt]
FROM [Users] AS [u]
WHERE [u].[UserId] = @__id_0
2025-06-20 15:31:24.082 +05:00 [DBG] Context 'AppDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:24.082 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.083 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 15:31:24.083 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.083 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:31:24.084 +05:00 [DBG] 'AppDbContext' generated a temporary value for the property 'Review.ReviewId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:24.084 +05:00 [DBG] The navigation 'Review.Hotel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:24.085 +05:00 [DBG] The navigation 'Review.User' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:24.085 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:24.085 +05:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-06-20 15:31:24.085 +05:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-06-20 15:31:24.086 +05:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-06-20 15:31:24.104 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.139 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.139 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:31:24.139 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:24.139 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:24.139 +05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:31:24.223 +05:00 [INF] Executed DbCommand (84ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Reviews] ([Comment], [CreatedAt], [HotelId], [IsVisible], [Rating], [UserId])
OUTPUT INSERTED.[ReviewId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-20 15:31:24.223 +05:00 [DBG] The foreign key property 'Review.ReviewId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-06-20 15:31:24.224 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.224 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 15:31:24.224 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.224 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:31:24.224 +05:00 [DBG] An entity of type 'Review' tracked by 'AppDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:24.224 +05:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-06-20 15:31:24.224 +05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-20 15:31:24.224 +05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-06-20 15:31:24.224 +05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-06-20 15:31:24.224 +05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-20 15:31:24.224 +05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-20 15:31:24.224 +05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-06-20 15:31:24.225 +05:00 [INF] Executing ObjectResult, writing value of type 'System.Int64'.
2025-06-20 15:31:24.225 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web) in 162.475ms
2025-06-20 15:31:24.225 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Create (HotelBookingSystem.Web)'
2025-06-20 15:31:24.225 +05:00 [INF] Request to /api/Review/create took 0.166 seconds with status code 200
2025-06-20 15:31:24.225 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:31:24.225 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:24.225 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:31:24.225 +05:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/Review/create - 200 null application/json; charset=utf-8 169.4406ms
2025-06-20 15:31:46.577 +05:00 [INF] Request starting HTTP/2 DELETE https://localhost:7276/api/Review/delete?userId=2&reviewId=7 - null null
2025-06-20 15:31:46.577 +05:00 [DBG] 1 candidate(s) found for the request path '/api/Review/delete'
2025-06-20 15:31:46.578 +05:00 [DBG] Endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Delete (HotelBookingSystem.Web)' with route pattern 'api/Review/delete' is valid for the request path '/api/Review/delete'
2025-06-20 15:31:46.578 +05:00 [DBG] Request matched endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Delete (HotelBookingSystem.Web)'
2025-06-20 15:31:46.578 +05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-06-20 15:31:46.579 +05:00 [INF] Executing endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Delete (HotelBookingSystem.Web)'
2025-06-20 15:31:46.587 +05:00 [INF] Route matched with {action = "Delete", controller = "Review"}. Executing controller action with signature System.Threading.Tasks.Task Delete(Int64, Int64) on controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web).
2025-06-20 15:31:46.587 +05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-06-20 15:31:46.587 +05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-06-20 15:31:46.587 +05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-06-20 15:31:46.587 +05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-06-20 15:31:46.587 +05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-06-20 15:31:46.587 +05:00 [DBG] Executing controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:31:46.588 +05:00 [DBG] Executed controller factory for controller HotelBookingSystem.Web.Controllers.ReviewController (HotelBookingSystem.Web)
2025-06-20 15:31:46.588 +05:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int64' ...
2025-06-20 15:31:46.588 +05:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int64' using the name 'userId' in request data ...
2025-06-20 15:31:46.588 +05:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int64'.
2025-06-20 15:31:46.588 +05:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int64'.
2025-06-20 15:31:46.588 +05:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int64' ...
2025-06-20 15:31:46.588 +05:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int64'.
2025-06-20 15:31:46.588 +05:00 [DBG] Attempting to bind parameter 'reviewId' of type 'System.Int64' ...
2025-06-20 15:31:46.588 +05:00 [DBG] Attempting to bind parameter 'reviewId' of type 'System.Int64' using the name 'reviewId' in request data ...
2025-06-20 15:31:46.588 +05:00 [DBG] Done attempting to bind parameter 'reviewId' of type 'System.Int64'.
2025-06-20 15:31:46.589 +05:00 [DBG] Done attempting to bind parameter 'reviewId' of type 'System.Int64'.
2025-06-20 15:31:46.589 +05:00 [DBG] Attempting to validate the bound parameter 'reviewId' of type 'System.Int64' ...
2025-06-20 15:31:46.589 +05:00 [DBG] Done attempting to validate the bound parameter 'reviewId' of type 'System.Int64'.
2025-06-20 15:31:46.593 +05:00 [DBG] Entity Framework Core 9.0.6 initialized 'AppDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.6' with options: EngineType=SqlServer 
2025-06-20 15:31:46.594 +05:00 [DBG] Compiling query expression: 
'DbSet<Review>()
    .FirstOrDefault(r => r.ReviewId == __id_0)'
2025-06-20 15:31:46.597 +05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Review>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Review>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.ReviewId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Comment (string) MaxLength(1000), 1], [Property: Review.CreatedAt (DateTime) Required, 2], [Property: Review.HotelId (long) Required FK Index, 3], [Property: Review.IsVisible (bool) Required Sentinel:True ValueGenerated.OnAdd, 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (long) Required FK Index, 6] }
            SELECT TOP(1) r.ReviewId, r.Comment, r.CreatedAt, r.HotelId, r.IsVisible, r.Rating, r.UserId
            FROM Reviews AS r
            WHERE r.ReviewId == @__id_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Review.ReviewId (long) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Review.Comment (string) MaxLength(1000), 1], [Property: Review.CreatedAt (DateTime) Required, 2], [Property: Review.HotelId (long) Required FK Index, 3], [Property: Review.IsVisible (bool) Required Sentinel:True ValueGenerated.OnAdd, 4], [Property: Review.Rating (int) Required, 5], [Property: Review.UserId (long) Required FK Index, 6] }
            SELECT TOP(1) r.ReviewId, r.Comment, r.CreatedAt, r.HotelId, r.IsVisible, r.Rating, r.UserId
            FROM Reviews AS r
            WHERE r.ReviewId == @__id_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            Review entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                Review instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(Review);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: Review.ReviewId PK | Resolver: c => c.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetInt64(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (Review)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")]: 
                            {
                                return 
                                {
                                    Review instance;
                                    instance = new Review();
                                    instance.<ReviewId>k__BackingField = dataReader.GetInt64(0);
                                    instance.<Comment>k__BackingField = dataReader.IsDBNull(1) ? default(string) : dataReader.GetString(1);
                                    instance.<CreatedAt>k__BackingField = dataReader.GetDateTime(2);
                                    instance.<HotelId>k__BackingField = dataReader.GetInt64(3);
                                    instance.<IsVisible>k__BackingField = dataReader.GetBoolean(4);
                                    instance.<Rating>k__BackingField = dataReader.GetInt32(5);
                                    instance.<UserId>k__BackingField = dataReader.GetInt64(6);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: Review | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("HotelBookingSystem.Domain.Entities.Review")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(Review)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: HotelBookingSystem.Infrastructure.Persistence.AppDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2025-06-20 15:31:46.598 +05:00 [DBG] Creating DbConnection.
2025-06-20 15:31:46.598 +05:00 [DBG] Created DbConnection. (0ms).
2025-06-20 15:31:46.598 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.599 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.599 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:31:46.599 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:46.599 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:46.599 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[ReviewId] = @__id_0
2025-06-20 15:31:46.604 +05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[ReviewId] = @__id_0
2025-06-20 15:31:46.604 +05:00 [DBG] Context 'AppDbContext' started tracking 'Review' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:46.605 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.605 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 15:31:46.605 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.605 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:31:46.607 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.608 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.608 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:31:46.608 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:46.608 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:46.608 +05:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[ReviewId] = @__id_0
2025-06-20 15:31:46.609 +05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[ReviewId], [r].[Comment], [r].[CreatedAt], [r].[HotelId], [r].[IsVisible], [r].[Rating], [r].[UserId]
FROM [Reviews] AS [r]
WHERE [r].[ReviewId] = @__id_0
2025-06-20 15:31:46.609 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.609 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2025-06-20 15:31:46.609 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.609 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:31:46.611 +05:00 [DBG] An entity of type 'Review' tracked by 'AppDbContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:46.612 +05:00 [DBG] SaveChanges starting for 'AppDbContext'.
2025-06-20 15:31:46.612 +05:00 [DBG] DetectChanges starting for 'AppDbContext'.
2025-06-20 15:31:46.613 +05:00 [DBG] DetectChanges completed for 'AppDbContext'.
2025-06-20 15:31:46.617 +05:00 [DBG] Opening connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.617 +05:00 [DBG] Opened connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.617 +05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-06-20 15:31:46.617 +05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:46.617 +05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-06-20 15:31:46.617 +05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Reviews]
OUTPUT 1
WHERE [ReviewId] = @p0;
2025-06-20 15:31:46.625 +05:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Reviews]
OUTPUT 1
WHERE [ReviewId] = @p0;
2025-06-20 15:31:46.627 +05:00 [DBG] Closing data reader to 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.627 +05:00 [DBG] A data reader for 'HotelBooking' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2025-06-20 15:31:46.627 +05:00 [DBG] Closing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.627 +05:00 [DBG] Closed connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS' (0ms).
2025-06-20 15:31:46.629 +05:00 [DBG] An entity of type 'Review' tracked by 'AppDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-20 15:31:46.630 +05:00 [DBG] SaveChanges completed for 'AppDbContext' with 1 entities written to the database.
2025-06-20 15:31:46.630 +05:00 [INF] Executed action HotelBookingSystem.Web.Controllers.ReviewController.Delete (HotelBookingSystem.Web) in 43.337ms
2025-06-20 15:31:46.630 +05:00 [INF] Executed endpoint 'HotelBookingSystem.Web.Controllers.ReviewController.Delete (HotelBookingSystem.Web)'
2025-06-20 15:31:46.631 +05:00 [INF] Request to /api/Review/delete took 0.052 seconds with status code 200
2025-06-20 15:31:46.631 +05:00 [DBG] 'AppDbContext' disposed.
2025-06-20 15:31:46.631 +05:00 [DBG] Disposing connection to database 'HotelBooking' on server 'localhost\SQLEXPRESS'.
2025-06-20 15:31:46.631 +05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-06-20 15:31:46.631 +05:00 [INF] Request finished HTTP/2 DELETE https://localhost:7276/api/Review/delete?userId=2&reviewId=7 - 200 0 null 54.0565ms
